{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./www/src/modules/modal.js","webpack:///./www/src/modules/contrat.js","webpack:///./www/src/modules/user.js","webpack:///./www/src/modules/backup.js","webpack:///./www/src/app.js","webpack:///./www/src/modules/helper.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createModal","parent","id","titre","size","Div","document","createElement","className","setAttribute","body","appendChild","Div2","Div3","Div4","Header","innerText","Btn","Span","DivContent","DivFoot","$","on","css","remove","addButtons","Btns","forEach","Button","Func","length","onclick","Action","eval","type","Glyph","innerHTML","Label","getElementById","alertBox","sType","sMessage","sTitre","iDuration","text","html","removeClass","addClass","show","setTimeout","fadeOut","doAction","action","params","initFormContact","chooseUser","val","dataset","modal","quit","undefined","formValid","sPost","idProducer","idReferent","idSuppleant","is","attr","console","log","data","Want","Vars","post","resp","Errno","alert","ErrMsg","saveContrat","doc","select","style","height","contrat","input","display","onchange","folder","Folder","Files","File","option","add","editDoc","click","file_data","prop","form_data","FormData","append","ajax","url","cache","contentType","processData","success","empty","failed","okDoc","table","thead","row","insertRow","insertCell","tbody","refreshLivraison","livraison","editLivraison","idContrat","rowDate","rowIndex","sRowMontant","rowMontant","parseFloat","toFixed","sVars","validLivraison","confirm","delLivraison","refreshWaitingList","okWait","delWait","refreshUserList","okUser","aera","width","editRules","load","Data","Unite","MaxLivraison","prix","Description","editProduct","el","label","unite","max","description","refreshProduct","saveProduct","delProduct","Content","Name","idContratType","Producteur","IdProducteur","Referent","IdReferent","Suppleant","IdSuppleant","EnCours","Verouille","Debut","DebutContrat","debContrat","substr","Fin","FinContrat","finContrat","nbPermanence","PrixContrat","contratDoc","Document","replace","line","Type","refreshListeContrat","title","sel","minHeight","multiple","user","Raisoc","rowNum","cells","Montant","cell","inp","textAlign","datepicker","altField","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","Datas","sRow","frDate","numLivraison","Html","Wait","sTelMobile","dateInscription","Nom","Prenom","Telephone","Prix","inputToField","refreshUser","editUsers","loadContent","connected","msg","window","location","href","hide","fadeIn","Msg","passwd","score","pass","letters","variations","digits","test","lower","upper","nonWords","variationCount","check","parseInt","scorePassword","changePass","login","passw","cnx","User","loadMenu","authenticate","mail","item","substring","exist","each","this","send","saveUser","delUser","email","focus","loadUser","uniqueEmail","prompt","pwdUser","initPassword","Rights","right","idRight","checked","gotRight","sLabel","switcher","loadBackupList","change","restoreNow","listitems","formatNumber","sPrix","indexOf","dPrix","getLink","backup"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,wEC3E9C,SAASC,YAAYC,EAAQC,EAAIC,EAAOC,GAC7C,IAAIC,EAAMC,SAASC,cAAc,OACjCF,EAAIG,UAAY,aAChBH,EAAIH,GAAKA,EACTG,EAAII,aAAa,OAAQ,UACzBJ,EAAII,aAAa,kBAAmBP,GACpCG,EAAII,aAAa,cAAe,QAChCH,SAASI,KAAKC,YAAYN,GAC1B,IAAIO,EAAON,SAASC,cAAc,OAClCK,EAAKJ,UAAY,gBAAgBJ,EACjCQ,EAAKH,aAAa,OAAQ,YAC1BJ,EAAIM,YAAYC,GAChB,IAAIC,EAAOP,SAASC,cAAc,OAClCM,EAAKL,UAAY,gBACjBI,EAAKD,YAAYE,GACjB,IAAIC,EAAOR,SAASC,cAAc,OAClCO,EAAKN,UAAY,eACjBK,EAAKF,YAAYG,GACjB,IAAIC,EAAST,SAASC,cAAc,MACpCQ,EAAOP,UAAY,cACnBO,EAAOC,UAAYb,EACnBW,EAAKH,YAAYI,GACjB,IAAIE,EAAMX,SAASC,cAAc,UACjCU,EAAIR,aAAa,OAAQ,UACzBQ,EAAIR,aAAa,eAAgB,SACjCQ,EAAIT,UAAY,QAChBM,EAAKH,YAAYM,GACjB,IAAIC,EAAOZ,SAASC,cAAc,QAClCW,EAAKT,aAAa,cAAe,QACjCS,EAAKF,UAAY,IACjBC,EAAIN,YAAYO,GAChB,IAAIC,EAAab,SAASC,cAAc,OACxCY,EAAWX,UAAY,aACvBW,EAAWjB,GAAKA,EAAK,WACrBW,EAAKF,YAAYQ,GACjB,IAAIC,EAAUd,SAASC,cAAc,OACrCa,EAAQZ,UAAY,eACpBY,EAAQlB,GAAKA,EAAK,UAClBW,EAAKF,YAAYS,GAEjBC,EAAE,IAAMnB,GAAIoB,GAAG,iBAAiB,WAC9BD,EAAE,IAAMpB,GAAQsB,IAAI,UAAW,OAEjCF,EAAE,IAAMnB,GAAIoB,GAAG,mBAAmB,WAChCD,EAAE,IAAMpB,GAAQsB,IAAI,UAAW,GAC/BF,EAAE,IAAMnB,GAAIsB,YAWT,SAASC,WAAWvB,GAAIwB,MAE7BA,KAAKC,SAAQ,SAASC,QACpB,IAAIX,IAAMX,SAASC,cAAc,UACjCU,IAAIR,aAAa,OAAQ,UACC,GAAtBmB,OAAOC,KAAKC,SACdb,IAAIc,QAAU,WACZ,IAAI5D,KAAOyD,OAAOC,KAAK,KAAKD,OAAOI,OAAO,SAC1CC,KAAK9D,QAGT8C,IAAIT,UAAY,WAAWoB,OAAOM,KACd,WAAhBN,OAAOO,OACTlB,IAAIR,aAAa,eAAgB,SAEnCQ,IAAImB,UAAY,oCAAoCR,OAAOO,MAAM,aAAaP,OAAOS,MACrF/B,SAASgC,eAAepC,GAAG,WAAWS,YAAYM,QAa/C,SAASsB,SAASC,EAAOC,EAAUC,EAAQC,QACtB,IAAf,IACTA,EAAY,KAEdtB,EAAE,aAAauB,KAAKF,GACpBrB,EAAE,WAAWwB,KAAKJ,GAClBpB,EAAE,WAAWyB,YAAY,iBACzBzB,EAAE,WAAWyB,YAAY,gBACzBzB,EAAE,WAAWyB,YAAY,cACzBzB,EAAE,WAAW0B,SAAS,SAAWP,GACjCnB,EAAE,WAAW2B,OACbC,YAAW,WACT5B,EAAE,WAAW6B,QAAQ,OACpBP,GAzGL,6O,+CCYO,SAASQ,EAASC,EAAQC,GAE/B,OAAOD,GAEL,IAAK,OACHE,EAAgB,GAChB,MAEF,IAAK,OAGHA,EADIpD,EAAGmD,GAEP,MAEF,IAAK,iBACHE,EAAW,aAAa,yBACxB,MAEF,IAAK,iBACHA,EAAW,WAAW,uBACtB,MAEF,IAAK,kBACHA,EAAW,YAAY,wBACvB,MAEF,IAAK,eACHlC,EAAE,aAAamC,IAAInC,EAAE,0BAA0BuB,QAC/C,IAAI1C,EAAKmB,EAAE,0BAA0BmC,MACrClD,SAASgC,eAAe,YAAYmB,QAAQvD,GAAGA,EAC/CmB,EAAE,gBAAgBqC,MAAM,QACxB,MAEF,IAAK,aACHrC,EAAE,aAAamC,IAAInC,EAAE,0BAA0BuB,QAC3C1C,EAAKmB,EAAE,0BAA0BmC,MACrClD,SAASgC,eAAe,YAAYmB,QAAQvD,GAAGA,EAC/CmB,EAAE,gBAAgBqC,MAAM,QACxB,MAEF,IAAK,cACHrC,EAAE,YAAYmC,IAAInC,EAAE,0BAA0BuB,QAC1C1C,EAAKmB,EAAE,0BAA0BmC,MACrClD,SAASgC,eAAe,WAAWmB,QAAQvD,GAAGA,EAC9CmB,EAAE,gBAAgBqC,MAAM,QACxB,MAEF,IAAK,QA8OT,SAAqBC,GAIPC,MAARD,IACFA,GAAK,GAEP,IAAIE,GAAY,EAEgB,IAA5BxC,EAAE,iBAAiBmC,OACrBK,GAAY,EACZxC,EAAE,iBAAiB0B,SAAS,aAE5B1B,EAAE,iBAAiByB,YAAY,YAEjC,IAAIgB,EAAM,GACVA,GAAS,UAAUxD,SAASgC,eAAe,gBAAgBmB,QAAQvD,GAAG,KACtE4D,GAAS,WAAWxD,SAASgC,eAAe,gBAAgBrD,MAAM,KAClE6E,GAAS,WAAWzC,EAAE,0BAA0BmC,MAAM,KACtD,IAAIO,EAAazD,SAASgC,eAAe,YAAYmB,QAAQvD,GAC3C,KAAd6D,GACFF,GAAY,EACZxC,EAAE,aAAa0B,SAAS,aAExB1B,EAAE,aAAayB,YAAY,YAE7BgB,GAAS,mBAAmBC,EAAW,KACvC,IAAIC,EAAa1D,SAASgC,eAAe,YAAYmB,QAAQvD,GAC3C,KAAd8D,GACFH,GAAY,EACZxC,EAAE,aAAa0B,SAAS,aAExB1B,EAAE,aAAayB,YAAY,YAE7BgB,GAAS,iBAAiBE,EAAW,KACrC,IAAIC,EAAc3D,SAASgC,eAAe,WAAWmB,QAAQvD,GAE7D4D,GAAS,kBAAkBG,EAAY,KACvCH,GAAS,gBAAgBzC,EAAE,kBAAkBmC,MAAM,KAChDnC,EAAE,WAAW6C,GAAG,YACjBJ,GAAS,mBAETA,GAAS,oBAOX,GALAA,GAAS,YAAYzC,EAAE,mBAAmBmC,MAAO,KACjDM,GAAS,UAAUzC,EAAE,iBAAiBmC,MAAO,KAC7CM,GAAS,eAAezC,EAAE,aAAamC,MAAM,KAC7CM,GAAS,eAAezC,EAAE,gBAAgB8C,KAAK,QAAQ,KACvDL,GAAS,YAAYzC,EAAE,WAAWmC,MAAM,KACpCK,EAAW,CACbO,QAAQC,IAAIP,GACZ,IAAIQ,EAAK,CACPtC,OAAQ,UACRuC,KAAQ,OACRC,KAAQV,GAEVzC,EAAEoD,KAAK,kBAAkBH,GAAK,SAASI,GACrC,GAAiB,GAAdA,EAAKC,MAEN,OADAC,MAAMF,EAAKG,SACJ,EAELlB,GACFtC,EAAE,iBAAiBqC,MAAM,gBAK7BkB,MAAM,kDA/SJE,CAAYzB,GACZ,MAEF,IAAK,OAiTT,WAGEK,EAAA,EAAkB,eAAgB,WAAY,iBAAiB,YAc/DA,EAAA,EAAiB,WAbR,CAAC,CACRrB,MAAU,UACVR,KAAU,UACVG,OAAU,QACVG,MAAU,KACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAGZ,IAAI6C,EAAMzE,SAASgC,eAAe,qBAC9BxC,EAAIQ,SAASC,cAAc,MAC7B6B,UAAY,oBAAoBf,EAAE,gBAAgBuB,OACpDmC,EAAIpE,YAAYb,IACZA,EAAIQ,SAASC,cAAc,MAC7B6B,UAAY,oBACd2C,EAAIpE,YAAYb,GAChB,IAMIA,EANAkF,EAAS1E,SAASC,cAAc,UACpCyE,EAAO9E,GAAK,YACZ8E,EAAOxE,UAAY,eACnBwE,EAAOvE,aAAa,YAAY,GAChCuE,EAAOC,MAAMC,OAAO,QACpBH,EAAIpE,YAAYqE,IACZlF,EAAIQ,SAASC,cAAc,MAC7B6B,UAAU,2FACZtC,EAAEiC,QAAU,WACVoD,QAAQ,YAAY,KAEtBJ,EAAIpE,YAAYb,GAChB,IAAIsF,EAAQ9E,SAASC,cAAc,SACnC6E,EAAMlD,KAAK,OACXkD,EAAMlF,GAAG,UACTkF,EAAMH,MAAMI,QAAQ,OACpBD,EAAME,SAAS,WACbH,QAAQ,UAAU,KAEpBJ,EAAIpE,YAAYyE,GAChBd,KAAK,CACHtC,OAAS,UACTuC,KAAS,UACTC,KAASnD,EAAE,iBAAiBmC,OAE9BnC,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GAC1BpE,SAASgC,eAAe,gBAAgBmB,QAC9C8B,OAAOb,EAAKc,OACpBd,EAAKe,MAAM9D,SAAQ,SAAS+D,GAC1B,IAAIC,EAASrF,SAASC,cAAc,UACpCoF,EAAO/C,KAAO8C,EACdV,EAAOY,IAAID,SAGftE,EAAE,aAAaqC,MAAM,QA1WjBmC,GACA,MAEF,IAAK,YA6WPvF,SAASgC,eAAe,WAAWwD,QA1W/B,MAEF,IAAK,UA8WHC,EAAY1E,EAAE,YAAY2E,KAAK,SAAS,IACxCC,EAAY,IAAIC,UACVC,OAAO,OAAQJ,GACzBE,EAAUE,OAAO,SAAU,WAC3BF,EAAUE,OAAO,OAAU,aAC3BF,EAAUE,OAAO,OAAU9E,EAAE,iBAAiBmC,OAE9CnC,EAAE+E,KAAK,CACLC,IAAK,kBACL/B,KAAM2B,EACNK,OAAO,EACPC,aAAa,EACbC,aAAa,EACbtE,KAAM,OACNuE,QAAS,SAAU/B,GAEjBJ,KAAK,CACHtC,OAAS,UACTuC,KAAS,UACTC,KAASnD,EAAE,iBAAiBmC,OAE9BnC,EAAE,cAAcqF,QAChB,IAAI1B,EAAS1E,SAASgC,eAAe,aACrCjB,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxCA,EAAKe,MAAM9D,SAAQ,SAAS+D,GAC1B,IAAIC,EAASrF,SAASC,cAAc,UACpCoF,EAAO/C,KAAO8C,EACdV,EAAOY,IAAID,UAIjBgB,OAAQ,SAASjC,GACfN,QAAQC,IAAIK,MA3YZ,MAEF,IAAK,SA+YT,WAEE,IAAIS,EAAU7E,SAASgC,eAAe,gBAAgBmB,QACtDpC,EAAE,gBAAgBuB,KAAKvB,EAAE,wBAAwBuB,QACjDvB,EAAE,gBAAgB8C,KAAK,OAAOgB,EAAQI,OAAO,IAAIlE,EAAE,wBAAwBuB,QAC3EvB,EAAE,aAAaqC,MAAM,QAlZjBkD,GACA,MAEF,IAAK,aAmZT,WAGElD,EAAA,EAAkB,eAAgB,iBAAkB,yBAAyB,IAc7EA,EAAA,EAAiB,iBAbR,CAAC,CACRrB,MAAU,UACVR,KAAU,UACVG,OAAU,eACVG,MAAU,OACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAGZb,EAAE,2BAA2BE,IAAI,YAAY,SAC7CF,EAAE,2BAA2BE,IAAI,SAAS,SAC1C,IAAIsF,EAAQvG,SAASC,cAAc,SACnCsG,EAAMrG,UAAU,8BAChB,IAAIsG,EAAQxG,SAASC,cAAc,SACnCsG,EAAMlG,YAAYmG,GAClB,IAAIC,EAAMD,EAAME,YACLD,EAAIE,aACV7E,UAAY,OACN2E,EAAIE,aACV7E,UAAY,SACN2E,EAAIE,aACV7E,UAAY,UACN2E,EAAIE,aACV7E,UAAY,SACjBf,EAAE,2BAA2B8E,OAAOU,GACpC,IAAIK,EAAQ5G,SAASC,cAAc,SACnC2G,EAAMhH,GAAG,uBACT2G,EAAMlG,YAAYuG,GAClBC,IACA9F,EAAE,mBAAmBqC,MAAM,QAvbvB0D,GACA,MAEF,IAAK,eACHC,EAAc,GACd,MAEF,IAAK,kBAgfT,SAAwBnH,GAGtB,IACIoH,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAE9BqH,EAAUlG,EAAE,yBAAyBmC,MACrCgE,EAAWnG,EAAE,0BAA0BmC,MACvCiE,EAAcpG,EAAE,4BAA4BmC,MAC5CkE,EAAaC,WAAWF,GAAaG,QAAQ,GAC7CC,EAAM,UAAU3H,EAAG,kBAAkBoH,EAAU,eACnDO,GAASN,EAAQ,qBAAqBC,EACtCK,GAAS,gBAAgBH,EAAW,KACpCpD,KAAO,CACLtC,OAAQ,UACRuC,KAAQ,gBACRC,KAAQqD,GAEVxG,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACnB,GAAdA,EAAKC,OACPC,MAAMF,EAAKG,QAEbsC,OArgBEW,CAAezE,GACf,MAEF,IAAK,gBACHgE,EAAchE,GACd,MAEF,IAAK,gBAkgBT,SAAsBnD,GAEpB,IAAK6H,QAAQ,4BACX,OAAO,EAETzD,KAAO,CACLtC,OAAQ,UACRuC,KAAQ,eACRC,KAAQtE,GAEVmB,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACnB,GAAdA,EAAKC,OACPC,MAAMF,EAAKG,QAEbsC,OA/gBEa,CAAa3E,GACb,MAEF,IAAK,UACHE,EAAW,OAAQ,gCACnB,MAEF,IAAK,UAijBT,WAEE,IACI+D,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAC9BA,EAAKmB,EAAE,0BAA0BmC,MAErCc,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,cACRC,KAJQ,UAAUtE,EAAG,kBAAkBoH,EAAU,MAMnDjG,EAAEoD,KAAK,kBAAkBH,MAAM,SAASI,GACtC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAEToD,IACA5G,EAAE,gBAAgBqC,MAAM,WAjkBtBwE,GACA,MAEF,IAAK,WAkkBT,SAAiBhI,GAEf,IACIoH,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAElCoE,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,cACRC,KAJQ,UAAUtE,EAAG,kBAAkBoH,EAAU,MAMnDjG,EAAEoD,KAAK,kBAAkBH,MAAM,SAASI,GACtC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETxD,EAAE,gBAAgBqC,MAAM,QACxBuE,OAjlBEE,CAAQ9E,GACR,MAEF,IAAK,aAEHuB,MAAM,mCACN,MAEF,IAAK,MACHA,MAAM,qCACN,MAEF,IAAK,OACHA,MAAM,uCACN,MAEF,IAAK,gBACHA,MAAM,oCACN,MAEF,IAAK,UACHrB,EAAW,OAAQ,sBACnB,MAEF,IAAK,UAomBT,WAEE,IACI+D,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAC9BA,EAAKmB,EAAE,0BAA0BmC,MAErCc,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,UACRC,KAJQ,UAAUtE,EAAG,kBAAkBoH,EAAU,MAMnDjG,EAAEoD,KAAK,kBAAkBH,MAAM,SAASI,GACtC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETT,QAAQC,IAAIK,EAAKG,QACjBuD,EAAgBd,GAChBjG,EAAE,gBAAgBqC,MAAM,WArnBtB2E,GACA,MAEF,IAAK,aA0yBT,WAEE3E,EAAA,EAAkB,eAAgB,aAAc,2BAA2B,IAc3EA,EAAA,EAAiB,aAbR,CAAC,CACRrB,MAAU,WACVR,KAAU,UACVG,OAAU,YACVG,MAAU,KACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAGZb,EAAE,uBAAuBE,IAAI,SAAS,SACtCF,EAAE,uBAAuBE,IAAI,YAAY,SACzC,IAAI+G,EAAOhI,SAASC,cAAc,YAClC+H,EAAKrD,MAAMC,OAAO,OAClBoD,EAAKrD,MAAMsD,MAAM,OACjBlH,EAAE,uBAAuB8E,OAAOmC,GAChCjH,EAAE,eAAeqC,MAAM,QA/zBnB8E,GACA,MAEF,IAAK,eA+pBT,SAAqBtI,GAEnBwD,EAAA,EAAkB,eAAgB,eAAgB,kBAAkB,IAcpEA,EAAA,EAAiB,eAbR,CAAC,CACRrB,MAAU,UACVR,KAAU,UACVG,OAAU,YACVG,MAAU,KACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAGZb,EAAE,yBAAyBoH,KAAK,mCACtB,GAANvI,IACFoE,KAAO,CACLtC,OAAQ,UACRuC,KAAQ,cACRC,KAAQtE,GAEVmB,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETxD,EAAE,UAAUmC,IAAIkB,EAAKgE,KAAK,GAAGrG,OACjB/B,SAASgC,eAAe,SAC9BmB,QAAQvD,GAAKA,EACnBmB,EAAE,UAAUmC,IAAIkB,EAAKgE,KAAK,GAAGC,OAC7BtH,EAAE,QAAQmC,IAAIkB,EAAKgE,KAAK,GAAGE,cAC3BvH,EAAE,SAASmC,IAAIkB,EAAKgE,KAAK,GAAGG,MAC5BxH,EAAE,gBAAgBmC,IAAIkB,EAAKgE,KAAK,GAAGI,iBAIvCzH,EAAE,iBAAiBqC,MAAM,QArsBrBqF,CAAY1F,GACZ,MAEF,IAAK,aAqsBT,WAEE,IAAI2F,EAAK1I,SAASgC,eAAe,SAC7BpC,EAAK8I,EAAGvF,QAAQvD,GAChB+I,EAAQD,EAAG/J,MACf,GAAa,IAATgK,EAEF,OADArE,MAAM,6BACC,EAET,IAAIsE,EAAQ5I,SAASgC,eAAe,SAASrD,MACzCkK,EAAM7I,SAASgC,eAAe,OAAOrD,MACrC4J,EAAOvI,SAASgC,eAAe,QAAQrD,MAEvCqI,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAC9BkJ,EAAc9I,SAASgC,eAAe,eAAerD,MAErD4I,EAAO,UAAU3H,EAAG,kBACxB2H,GAASP,EAAW,cAAc2B,EAAM,cACxCpB,GAASqB,EAAO,YAAYC,EAAI,aAChCtB,GAASgB,EAAK,oBAAoBO,EAAY,KAE9C9E,KAAO,CACLtC,OAAS,UACTuC,KAAS,cACTC,KAASqD,GAEXxG,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETxD,EAAE,iBAAiBqC,MAAM,QACzB2F,EAAe/B,MApuBbgC,GACA,MAEF,IAAK,cAywBT,SAAoBpJ,GAElBkE,QAAQC,IAAI,mBAAmBnE,GAC/BoE,KAAO,CACLtC,OAAS,UACTuC,KAAS,aACTC,KAAStE,GAEXmB,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAET,IACIyC,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAClCkE,QAAQC,IAAI,WAAWiD,GACvB+B,EAAe/B,MAxxBbiC,CAAWlG,GACX,MAEF,QACEe,QAAQC,IAAI,4BAA4BjB,GAqR9C,IAGM2C,EACAE,EA/QN,SAAS3C,EAAgBpD,GAEvBwD,EAAA,EAAkB,aAAc,eAAgB,qBAAqB,YAErEY,KAAM,CACJtC,OAAQ,UACRwH,QAAS,eAEXnI,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUA,GACxCjD,EAAE,yBAAyBwB,KAAKyB,GAChChE,SAASgC,eAAe,gBAAgBmB,QAAQvD,GAAKA,KAqB7C,GAANA,IAEFoE,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,UACRC,KAAQtE,GAEVmB,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxCN,QAAQC,IAAIK,GACZrD,EAAE,iBAAiBmC,IAAIkB,EAAKgE,KAAK,GAAGe,MACpCnJ,SAASgC,eAAe,gBAAgBmB,QAAQvD,GAAGwE,EAAKgE,KAAK,GAAGxI,GAChEmB,EAAE,8BAA8BqD,EAAKgE,KAAK,GAAGgB,cAAc,MAAM1D,KAAK,YAAY,GAClF3E,EAAE,aAAamC,IAAIkB,EAAKgE,KAAK,GAAGiB,YAChCrJ,SAASgC,eAAe,YAAYmB,QAAQvD,GAAGwE,EAAKgE,KAAK,GAAGkB,aAC5DvI,EAAE,aAAamC,IAAIkB,EAAKgE,KAAK,GAAGmB,UAChCvJ,SAASgC,eAAe,YAAYmB,QAAQvD,GAAGwE,EAAKgE,KAAK,GAAGoB,WAC5DzI,EAAE,YAAYmC,IAAIkB,EAAKgE,KAAK,GAAGqB,WAC/BzJ,SAASgC,eAAe,WAAWmB,QAAQvD,GAAGwE,EAAKgE,KAAK,GAAGsB,YAC3D3I,EAAE,kBAAkBmC,IAAIkB,EAAKgE,KAAK,GAAGuB,SACrC5I,EAAE,cAAcuB,KAAK8B,EAAKgE,KAAK,GAAGuB,SACJ,GAA1BvF,EAAKgE,KAAK,GAAGwB,UACf7I,EAAE,WAAW2E,KAAK,WAAU,GAE5B3E,EAAE,WAAW2E,KAAK,WAAU,GAE9B,IAAImE,EAAQzF,EAAKgE,KAAK,GAAG0B,aACrBC,EAAaF,EAAMG,OAAO,EAAE,GAAG,IAAIH,EAAMG,OAAO,EAAE,GACtDjJ,EAAE,mBAAmBmC,IAAI6G,GACzB,IAAIE,EAAM7F,EAAKgE,KAAK,GAAG8B,WACnBC,EAAaF,EAAID,OAAO,EAAE,GAAG,IAAIC,EAAID,OAAO,EAAE,GAClDjJ,EAAE,iBAAiBmC,IAAIiH,GACvBpJ,EAAE,aAAamC,IAAIkB,EAAKgE,KAAK,GAAGgC,cAChCrJ,EAAE,WAAWmC,IAAIkB,EAAKgE,KAAK,GAAGiC,aAC9B,IAAIC,EAAalG,EAAKgE,KAAK,GAAGmC,SAC9BxJ,EAAE,gBAAgBuB,KAAKgI,EAAWE,QAAQ,OAAQ,KAClDzJ,EAAE,gBAAgB8C,KAAK,OAAOO,EAAKgE,KAAK,GAAGmC,UAC3C5C,IACAG,EAAgBlI,GAChBmJ,EAAenJ,OAGnBwD,EAAA,EAAiB,eA5DR,CAAC,CACRrB,MAAU,cACVR,KAAU,UACVG,OAAU,OACVG,MAAU,OACVD,KAAU,WACV,CACAG,MAAU,kBACVR,KAAU,UACVG,OAAU,MACVG,MAAU,SACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eA4CZb,EAAE,iBAAiBqC,MAAM,QAEzBrC,EAAE,iBAAiBC,GAAG,mBAAmB,YA6tB3C,WAEE8C,QAAQC,IAAI,4BACZ,IAAI6C,EAAQ5G,SAASgC,eAAe,iBACpC4E,EAAM9E,UAAY,GAClBkC,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,eACRC,KAAQ,IAEVnD,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETH,EAAKgE,KAAK/G,SAAQ,SAASoJ,GACzB,IAAIhE,EAAMG,EAAMF,YAChBD,EAAIhF,QAAU,WACZoD,QAAQ,OAAO4F,EAAK7K,KAEX6G,EAAIE,aACV7E,UAAY2I,EAAK9B,MACXlC,EAAIE,aACV7E,UAAY2I,EAAKC,KACXjE,EAAIE,aACV7E,UAAY2I,EAAKpB,WACX5C,EAAIE,aACV7E,UAAY2I,EAAKlB,SACX9C,EAAIE,aACV7E,UAAY2I,EAAKb,gBAzvBxBe,MAIJ,SAAS1H,EAAWrB,EAAMgJ,GAExBxH,EAAA,EAAkB,eAAgB,cAAewH,EAAM,YACvD,IAAIxJ,EAAK,CAAC,CACRW,MAAU,UACVR,KAAU,UACVG,OAAU,KAAKE,EACfC,MAAU,KACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,cAEZwB,EAAA,EAAiB,cAAchC,GAC/B,IAAIyJ,EAAM7K,SAASC,cAAc,UACjC4K,EAAIjL,GAAG,cACPiL,EAAI3K,UAAU,eACd2K,EAAIlG,MAAMC,OAAO,QACjBiG,EAAIlG,MAAMmG,UAAU,QACpBD,EAAIE,UAAS,EACH/K,SAASgC,eAAe,uBAC9B3B,YAAYwK,GAEhB7G,KAAK,CACHtC,OAAS,UACTuC,KAAS,MAAMrC,GAEjBb,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxCA,EAAK/C,SAAQ,SAAS2J,GACpB,IAAI3F,EAASrF,SAASC,cAAc,UACpCoF,EAAO/C,KAAO0I,EAAKC,OACnB5F,EAAO1G,MAAQqM,EAAKpL,GACpBiL,EAAIvF,IAAID,SAKZtE,EAAE,gBAAgBqC,MAAM,QA8O1B,SAAS2D,EAAcnH,GAErB,IAAI8I,EAAK1I,SAASgC,eAAe,wBACjC,GAAU,GAANpC,EAAS,EACP6G,EAAMiC,EAAGhC,aACT9G,GAAG,wBACP,IAAIqH,EAAQ,GACRiE,EAAO,EACP9D,EAAW,QACV,CAEDH,GADAR,EAAMzG,SAASgC,eAAe,uBAAuBpC,IACzCuL,MAAM,GAAGzK,UACrBwK,EAAOzE,EAAI0E,MAAM,GAAGzK,UAFxB,IAAI+F,EAGA2E,EAAU3E,EAAI0E,MAAM,GAAGzK,UACvB0G,EAAWgE,EAAQpB,OAAO,EAAEoB,EAAQ5J,OAAO,GAC/CiF,EAAI3E,UAAU,GAEhB,IAAIuJ,EAAO5E,EAAIE,cACX2E,EAAMtL,SAASC,cAAc,UAC7B2B,KAAK,OACT0J,EAAI1L,GAAG,uBACP0L,EAAI3G,MAAMsD,MAAM,QAChBqD,EAAI3M,MAAMsI,EACVoE,EAAKhL,YAAYiL,GACjB,IASIA,EATAD,EAAO5E,EAAIE,cACX2E,EAAMtL,SAASC,cAAc,UAC7B2B,KAAK,OACT0J,EAAI1L,GAAG,wBACP0L,EAAI3G,MAAMsD,MAAM,OAChBqD,EAAI3M,MAAMuM,EACVG,EAAKhL,YAAYiL,IACbD,EAAO5E,EAAIE,cACVhC,MAAM4G,UAAU,SACjBD,EAAMtL,SAASC,cAAc,UAC7B2B,KAAK,OACT0J,EAAI1L,GAAG,0BACP0L,EAAI3G,MAAMsD,MAAM,OAChBqD,EAAI3M,MAAMyI,EACViE,EAAKhL,YAAYiL,IACbD,EAAO5E,EAAIE,cACV7E,UAAU,+CACfuJ,EAAK1G,MAAM4G,UAAU,QACrBF,EAAK5J,QAAS,WACZoD,QAAQ,iBAAiBjF,IAE3BmB,EAAG,yBAA0ByK,WAAW,CACtCC,SAAU,gBACVC,UAAW,SACXC,SAAU,YACVC,SAAU,UACVC,YAAa,cACbC,WAAY,CAAC,UAAW,UAAW,OAAQ,QAAS,MAAO,OAAQ,UAAW,OAAQ,YAAa,UAAW,WAAY,YAC1HC,gBAAiB,CAAC,QAAS,QAAS,OAAQ,QAAS,MAAO,OAAQ,QAAS,OAAQ,QAAS,OAAQ,OAAQ,QAC9GC,SAAU,CAAC,WAAY,QAAS,QAAS,WAAY,QAAS,WAAY,UAC1EC,cAAe,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QAChEC,YAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5CC,WAAY,OACZC,WAAY,aAgDhB,SAASvF,IAEP,IACIG,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAC9BgH,EAAQ5G,SAASgC,eAAe,wBACpC4E,EAAM9E,UAAU,GAChBkC,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,gBACRC,KAAQ8C,GAEVjG,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACnB,GAAdA,EAAKC,OACPC,MAAMF,EAAKG,QAEbT,QAAQC,IAAIK,GACZA,EAAKiI,MAAMhL,SAAQ,SAAUiL,GAC3B,IAAI7F,EAAMG,EAAMF,YAChBD,EAAI7G,GAAK,uBAAuB0M,EAAK1M,IACjCyL,EAAO5E,EAAIE,cACV7E,UAAWwK,EAAKC,QACjBlB,EAAO5E,EAAIE,cACV7E,UAAWwK,EAAKE,cACjBnB,EAAO5E,EAAIE,cACVhC,MAAM4G,UAAU,QACrBF,EAAKvJ,UAAWwK,EAAKlB,QAAQ,kBAC7B,IAAIC,EAAO5E,EAAIE,aACX8F,EAAQ,mFACZA,GAAQ,oCAAoCH,EAAK1M,GAAG,cACpD6M,GAAQ,oFACRA,GAAQ,qCAAqCH,EAAK1M,GAAG,cACrDyL,EAAK1G,MAAM4G,UAAY,QACvBF,EAAKvJ,UAAY2K,QA8CvB,SAAS9E,IAEP7D,QAAQC,IAAI,uBACZ,IACIiD,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAClCoE,KAAK,CACHtC,OAAQ,UACRuC,KAAQ,WACRC,KAAQ8C,GAEV,IAAIJ,EAAQ5G,SAASgC,eAAe,gBACpC4E,EAAM9E,UAAU,GAChBf,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,IAAmB,GAAfA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAETH,EAAKsI,KAAKrL,SAAQ,SAASoJ,GACzB,IAOIY,EAPA5E,EAAMG,EAAMF,aACZ2E,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAK8B,QAClBlB,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKQ,QAClBI,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKkC,YAClBtB,EAAO5E,EAAIE,cACVhC,MAAM4G,UAAU,QACrB,IAAIkB,EAAQ,uDACZA,GAAQ,2CACRA,GAAQ,kCAAmChC,EAAK7K,GAAG,eACnD6M,GAAQ,mDACRA,GAAQ,sDACRA,GAAQ,+BAAgChC,EAAK7K,GAAG,cAChDyL,EAAKvJ,UAAY2K,QA4BvB,SAAS3E,EAAgBlI,GAEvB,GAAU0D,MAAN1D,EACF,IAAIoH,EAAYpH,OAGZoH,EADYhH,SAASgC,eAAe,gBACdmB,QAAQvD,GAEpCoE,KAAK,CACHtC,OAAS,UACTuC,KAAS,kBACTC,KAAS8C,GAEXjG,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,IAAmB,GAAfA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAET,IAAIqC,EAAQ5G,SAASgC,eAAe,aACpC4E,EAAM9E,UAAU,GAChBsC,EAAKgE,KAAK/G,SAAQ,SAASoJ,GACzB,IAYIY,EAZA5E,EAAMG,EAAMF,aAIZ2E,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKmC,iBAClBvB,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKoC,KAClBxB,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKqC,QAClBzB,EAAO5E,EAAIE,cACV7E,UAAY2I,EAAKsC,WAClB1B,EAAO5E,EAAIE,cACVhC,MAAM4G,UAAU,QACrB,IAAIkB,EAAQ,+CACZA,GAAQ,6BACRA,GAAQ,sCAAsChC,EAAK7K,GAAG,yBACtD6M,GAAQ,kEACRA,GAAQ,mDAAmDhC,EAAK7K,GAAG,cACnEyL,EAAKvJ,UAAY2K,QAoFvB,SAAS1D,EAAenJ,GAEtBoE,KAAO,CACLtC,OAAS,UACTuC,KAAS,cACTC,KAAStE,GAEXmB,EAAEoD,KAAK,kBAAkBH,MAAK,SAASI,GACrC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAET,IAAIqC,EAAQ5G,SAASgC,eAAe,gBACpC4E,EAAM9E,UAAU,GAChBsC,EAAKgE,KAAK/G,SAAQ,SAASoJ,GACzB,IAUIY,EAVA5E,EAAMG,EAAMF,YAChBD,EAAIhF,QAAS,WACXoD,QAAQ,cAAc4F,EAAK7K,MAEzByL,EAAO5E,EAAIE,cACV7E,UAAU2I,EAAK1I,OAChBsJ,EAAO5E,EAAIE,cACV7E,UAAU2I,EAAKpC,OAChBgD,EAAO5E,EAAIE,cACV7E,UAAU2I,EAAKuC,MAChB3B,EAAO5E,EAAIE,cACVhC,MAAM4G,UAAU,QACrB,IAAIkB,EAAO,2CACXA,GAAQ,2CACRA,GAAQ,kCAAkChC,EAAK7K,GAAG,cAClDyL,EAAKvJ,UAAW2K,KAElB3I,QAAQC,IAAIK,MC95BhB,IAAI6I,EAAe,CACjB,KAAK,SAAS,OAAO,UAAU,WAAW,cAC1C,SAAS,aAAa,aAAa,SAAS,WAQvC,SAASjC,EAAKlI,EAAOC,GAE1B,GAAcO,MAAVR,EAGF,OAwEJ,WACEM,EAAA,EAAkB,UAAW,cAAe,2BAA2B,YACvErC,EAAE,wBAAwB0B,SAAS,gBAQnCW,EAAA,EAAiB,cAPR,CAAC,CACRrB,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAGZsL,IACAnM,EAAE,gBAAgBqC,MAAM,QArFtB+J,IACO,EAET,OAAOrK,GAEL,IAAK,QACHsK,YAAY,SACZ,MAEF,IAAK,SACHrM,EAAE,YAAYoH,KAAK,4BACnB,MAEF,IAAK,OACHnI,SAASgC,eAAe,YAAYmB,QAAQkK,UAAU,IACtDtM,EAAE+E,KAAK,CACLlE,KAAM,MACNmE,IAAK,kBACLI,QAAS,SAAUmH,GACjB3K,YAAW,WACT4K,OAAOC,SAASC,KAAO,eACtB,QAGP,MAEF,IAAK,cAmWT,WACE,GAAwD,QAApDzN,SAASgC,eAAe,WAAW2C,MAAMI,QAI3C,OAHAhE,EAAE,eAAe2M,OACjB3M,EAAE,eAAeuB,KAAK,2BACtBvB,EAAE,YAAY4M,UACP,EAET,IAAIC,EAAM,2CASV,GARAA,GAAO,gBACPA,GAAO,+CACPA,GAAO,2CACPA,GAAO,wCACPA,GAAO,sFACPA,GAAO,0DACPA,GAAO,sDACPA,GAAO,qHACH7M,EAAE,UAAUmC,OAASnC,EAAE,UAAUmC,MAGnC,OAFA0K,EAAM,6CAA6CA,EACnDxK,EAAA,EAAe,SAAUwK,EAAK,SAAU,MACjC,EAET,IAAIC,EAAS9M,EAAE,UAAUmC,MACrB4K,EA8BN,SAAuBC,GAErB,IAAID,EAAQ,EACZ,IAAKC,EACD,OAAOD,EAIX,IADA,IAAIE,EAAU,IAAI5P,OACTV,EAAE,EAAGA,EAAEqQ,EAAKvM,OAAQ9D,IACzBsQ,EAAQD,EAAKrQ,KAAOsQ,EAAQD,EAAKrQ,KAAO,GAAK,EAC7CoQ,GAAS,EAAME,EAAQD,EAAKrQ,IAIhC,IAAIuQ,EAAa,CACbC,OAAQ,KAAKC,KAAKJ,GAClBK,MAAO,QAAQD,KAAKJ,GACpBM,MAAO,QAAQF,KAAKJ,GACpBO,SAAU,KAAKH,KAAKJ,IAGpBQ,EAAiB,EACrB,IAAK,IAAIC,KAASP,EACdM,GAAwC,GAArBN,EAAWO,GAAkB,EAAI,EAIxD,OAFAV,GAAgC,IAAtBS,EAAiB,GAEpBE,SAASX,GAzDJY,CAAcb,GAC1B/J,QAAQC,IAAI,eAAe+J,GACvBA,EAAQ,KACVF,EAAI,2BACJxK,EAAA,EAAe,OAAQwK,EAAK,cAAe,MAE7C,GAAIE,EAAQ,GAGV,OAFAF,EAAM,2DAA2DA,EACjExK,EAAA,EAAe,SAAUwK,EAAK,SAAU,MACjC,EAGT5J,KAAO,CACLtC,OAAU,OACVuC,KAAU,aACVC,KAAW2J,GAEb9M,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACtB,GAAdA,EAAKC,MACPjB,EAAA,EAAe,SAAUgB,EAAKG,OAAQ,UAEtCnB,EAAA,EAAe,UAAWgB,EAAKG,OAAQ,WA7YvCoK,GACA,MAEF,IAAK,QAyGT,WACE,IAAIC,EAAQ7N,EAAE,UAAUmC,MACpB2L,EAAQ9N,EAAE,aAAamC,MAC3B,GAAa,IAAT0L,GAAwB,IAATC,EAEjB,OADAzL,EAAA,EAAe,SAAU,kDAAmD,WACrE,EAGTY,KAAO,CACLtC,OAAU,OACVuC,KAAU,QACVC,KAJQ,aAAa0K,EAAM,cAAcC,EAAM,MAMjD9N,EAAEoD,KAAK,kBAAmBH,MAAK,SAAUI,GACrC,IAAmB,GAAfA,EAAKC,MAEP,OADAjB,EAAA,EAAe,SAASgB,EAAKG,OAAO,WAC7B,EAETT,QAAQC,IAAI,gBACZ,IAAI+K,EAAM9O,SAASgC,eAAe,YAClC8M,EAAIhN,UAAY,kDAAoDsC,EAAK2K,KAAKjC,OAAS,IAAM1I,EAAK2K,KAAKlC,IACvGiC,EAAI3L,QAAQkK,UAAU,EACtByB,EAAIrN,QAAU,WACZuJ,EAAK,SAAS,KAKhBoC,YAAY,QAEZ4B,cArIAC,GACA,MAEF,IAAK,MACHjE,EAAK,OAAO,GACZ,MAEF,IAAK,QA6KT,WAGE,IAAIkE,EAAOlP,SAASgC,eAAe,UAAUrD,MAC7C,IAAI,gDAAgDwP,KAAKe,GAKvD,OAFAnO,EAAE,UAAU0B,SAAS,YACrB6B,MAAM,4BACC,EAET,GAAY,IAAR4K,EAGF,OAFAnO,EAAE,UAAU0B,SAAS,YACrB6B,MAAM,8BACC,EAIT,GAFAvD,EAAE,UAAUyB,YAAY,YAEb,IADDxC,SAASgC,eAAe,QAAQrD,MAIxC,OAFAoC,EAAE,QAAQ0B,SAAS,YACnB6B,MAAM,6BACC,EAETvD,EAAE,QAAQyB,YAAY,YAEtB,IAAIwB,EAAO,YAEXiJ,EAAa5L,SAAQ,SAAU8N,GACjB,WAARA,IACFnL,GAAQ,IAAKmL,EAAM,MAAQpO,EAAE,IAAMoO,GAAMjM,MAAQ,SAIrDc,EAAOA,EAAKoL,UAAU,EAAGpL,EAAKxC,OAAS,GACvCwC,GAAQ,eAER,IAAIqL,GAAQ,EACZtO,EAAE,8BAA8BuO,MAAK,WACnCtL,GAAQ,IAAMjD,EAAEwO,MAAMrM,MAAQ,KAC9BmM,GAAQ,KAENA,IACFrL,EAAOA,EAAKoL,UAAU,EAAGpL,EAAKxC,OAAS,IAIzC,IAAIgO,EAAO,CACT9N,OAAS,OACTuC,KAAS,OACTC,KALFF,GAAQ,MAORjD,EAAEoD,KAAK,kBAAkBqL,GAAK,SAASpL,GACnB,GAAdA,EAAKC,OACPC,MAAMF,EAAKG,QAEb2I,IACAnM,EAAE,cAAcqC,MAAM,WApOpBqM,GACA,MAEF,IAAK,OA8QT,SAAiB7P,GAEf,IAAI8I,EAAK1I,SAASgC,eAAe,QAAQpC,GACrCgO,EAAM,WAAWlF,EAAGyC,MAAM,GAAGzK,UAAU,IAAIgI,EAAGyC,MAAM,GAAGzK,UAAU,KACjE+G,QAAQmG,KAEV5J,KAAO,CACLtC,OAAS,OACTuC,KAAS,UACTC,KAAStE,IAEbkE,QAAQC,IAAIC,MACZjD,EAAEoD,KAAK,kBAAmBH,MAAM,SAASI,GACrB,GAAdA,EAAKC,OACPC,MAAMF,EAAKG,QAEb2I,OA7REwC,CAAQ3M,GACR,MAEF,IAAK,eAuOT,SAAqB4M,GAGnB,IAAI,gDAAgDxB,KAAKwB,GAMvD,OAHArL,MAAM,kCACNtE,SAASgC,eAAe,UAAUrD,MAAM,GACxCoC,EAAE,WAAW6O,SACN,EAIT5L,KAAO,CACLtC,OAAU,OACVuC,KAAU,YACVC,KAAUyL,GAEZ5O,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxC,GAAkB,GAAdA,EAAKC,MAOP,OANIoD,QAAQrD,EAAKG,QACfsL,EAASzL,EAAKxE,KAEdmB,EAAE,WAAWmC,IAAI,IACjBnC,EAAE,WAAW6O,UAER,EAEiB,IAAtB7O,EAAE,WAAWmC,OACfnC,EAAE,WAAWmC,IAAInC,EAAE,WAAWmC,UAnQ9B4M,CAAY/M,GACZ,MAEF,IAAK,OA0CSnD,EAzCHmD,EAwDbK,EAAA,EAAkB,cAAe,YAAa,sBAAsB,IACpEA,EAAA,EAAiB,YAdR,CAAC,CACRrB,MAAU,cACVR,KAAU,OACVG,OAAU,OACVG,MAAU,KACVD,KAAU,WACV,CACAG,MAAU,UACVR,KAAU,GACVG,OAAU,GACVG,MAAU,UACVD,KAAU,eAIZb,EAAE,sBAAsBoH,KAAK,oCAAoC,WAC/D0H,EAASjQ,GACTmB,EAAE,cAAcqC,MAAM,WA3DpB,MAEF,IAAK,OAsRT,SAAiBxD,GAEf,IAAI8I,EAAK1I,SAASgC,eAAe,QAAQpC,GACrCgO,EAAM,6BAA6BlF,EAAGyC,MAAM,GAAGzK,UAAU,IAAIgI,EAAGyC,MAAM,GAAGzK,UAAU,KACnFmN,EAASkC,OAAOnC,GAChBrG,EAAQ,UAAU3H,EAAG,eAAeiO,EAAO,KAC3CA,IACF7J,KAAO,CACLtC,OAAU,OACVuC,KAAU,eACVC,KAAUqD,GAEZxG,EAAEoD,KAAK,kBAAmBH,OAjSxBgM,CAAQjN,GACR,MAEF,IAAK,YAkST,WAEE,IAAI6L,EAAQ7N,EAAE,UAAUmC,MACxB,GAAa,IAAT0L,EAEF,OADAtK,MAAM,mDACC,EAETN,KAAO,CACLtC,OAAU,OACVuC,KAAU,YACVC,KAAU0K,GAEZ7N,EAAEoD,KAAK,kBAAmBH,MAAM,SAASI,GACvC,GAAiB,GAAdA,EAAKC,MAKN,OAJAtD,EAAE,WAAWyB,YAAY,cACzBzB,EAAE,WAAW0B,SAAS,gBACtB1B,EAAE,aAAauB,KAAK,UACpBvB,EAAE,WAAWwB,KAAK6B,EAAKG,SAChB,EAETxD,EAAE,WAAWyB,YAAY,gBACzBzB,EAAE,WAAW0B,SAAS,cACtB1B,EAAE,aAAauB,KAAK,eACpBvB,EAAE,WAAWwB,KAAK,4EAxThB0N,GACA,MAEF,QACE3L,MAAM,kBAAkBxB,EAAO,IAAIC,GA6BzC,IAAkBnD,EAuBlB,SAASsN,IAEPlJ,KAAO,CACLtC,OAAQ,OACRuC,KAAM,YACNC,KAAM,IAERnD,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxCrD,EAAE,wBAAwBwB,KAAK6B,EAAK7B,SAmDxC,SAASsN,EAASjQ,GAEhB,GAAU,GAANA,EACF,OAAO,EAEToE,KAAO,CACLtC,OAAU,OACVuC,KAAU,aACVC,KAAUtE,GAEZmB,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUI,GACxC,GAAkB,GAAdA,EAAKC,MAEP,OADAC,MAAMF,EAAKG,SACJ,EAGT0I,EAAa5L,SAAQ,SAAU8N,GAC7BnP,SAASgC,eAAemN,GAAMxQ,MAAQyF,EAAK2K,KAAKI,MAGlD/K,EAAK8L,OAAO7O,SAAQ,SAAU8O,GAC5B,IAAIpQ,EAAMC,SAASC,cAAc,OAC7B6E,EAAQ9E,SAASC,cAAc,SAC/B0I,EAAQ3I,SAASC,cAAc,SACnC6E,EAAMnG,MAAQwR,EAAMC,QACpBtL,EAAMlD,KAAO,WACbkD,EAAM7G,KAAO,SACb6G,EAAMuL,QAAUF,EAAMG,SACtBvQ,EAAIM,YAAYyE,GAChB6D,EAAMxI,aAAa,MAAOgQ,EAAMC,SAChCzH,EAAMjI,UAAYyP,EAAMI,OACxBxQ,EAAIM,YAAYsI,GAChB3I,SAASgC,eAAe,eAAe3B,YAAYN,SC7NlD,SAASyQ,EAAS1N,EAAQC,GAE/B,OAAOD,GAEL,IAAK,YAsBP/B,EAAE,mBAAmB6B,QAAQ,QAC7BoB,KAAO,CACLtC,OAAQ,WACRuC,KAAM,SACNyG,KAAM,GACN9K,GAAI,IAENwD,EAAA,EAAe,OAAQ,sBAAuB,OAAQ,KAEtDrC,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUA,GACxCZ,EAAA,EAAe,UAAW,sBAAuB,UAAW,KAC5DrC,EAAE,cAAcwB,KAAK,oCAAsCyB,EAAKoB,KAAO,KAAOpB,EAAKoB,KAAO,WA/BxF,MAEF,IAAK,UA0CPqL,IACA1P,EAAE,mBAAmB6B,QAAQ,QAC7B7B,EAAE,oBAAoB4M,SACtB5M,EAAE,eAAe2P,QAAO,WACtB,IAAIjL,EAAY1E,EAAE,eAAe2E,KAAK,SAAS,GAC3CC,EAAY,IAAIC,SACpB,GAAsB,mBAAlBH,EAAU7D,KAEZ,OADA0C,MAAM,gCACC,EAETqB,EAAUE,OAAO,OAAQJ,GACzBE,EAAUE,OAAO,SAAU,YAC3BF,EAAUE,OAAO,QAAS,aAC1B9E,EAAE+E,KAAK,CACLC,IAAK,kBACL/B,KAAM2B,EACNK,OAAO,EACPC,aAAa,EACbC,aAAa,EACbtE,KAAM,OACNuE,QAAS,WACPsK,UA7DF,MAEF,IAAK,cAgGT,WACE,GAA8B,GAA1B1P,EAAE,eAAemC,MAEnB,OADAoB,MAAM,+CACC,EAET,GAAgDhB,MAA5CvC,EAAE,iCAAiCmC,MAErC,OADAoB,MAAM,0CACC,EAETvD,EAAE,cAAcuB,KAAK,6BACrB0B,KAAO,CACLtC,OAAQ,WACRuC,KAAM,YACNyG,KAAM3J,EAAE,eAAemC,MACvBtD,GAAImB,EAAE,iCAAiCmC,OAEzCnC,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUA,GACxCjD,EAAE,cAAcuB,KAAK,yBACrBvB,EAAE,cAAcwB,KAAK,WAAayB,EAAKO,WAjHrCoM,GACA,MAEF,QACErM,MAAMxB,EAAO,mCAqEnB,SAAS2N,IACPzM,KAAO,CACLtC,OAAQ,WACRuC,KAAM,iBACNyG,KAAM,GACN9K,GAAI,GAENmB,EAAEoD,KAAK,kBAAmBH,MAAM,SAAUA,GACxC,IAAI4M,EACJ5M,EAAK3C,QAAS8N,IACZyB,GAAa,iBAAmBzB,EAAKvP,GAAK,IAAMuP,EAAKxG,MAAQ,cAE/D5H,EAAE,iBAAiB8E,OAAO+K,MC/F9BrD,OAAO1I,QAAU,SAAS/B,EAAQC,GAC/B,EAAkBD,EAAQC,IAG7BwK,OAAOsD,aAAe,YCTf,WAEL,IAAIC,EAAQ/P,EAAE,WAAWmC,MAErB4N,EAAMC,QAAQ,KAAO,IACvBD,EAAQA,EAAMtG,QAAQ,IAAI,MAE5B,IAAIwG,EAAQ3J,WAAWyJ,GAAOxJ,QAAQ,GACtCwJ,EAAQ/P,EAAE,WAAWmC,IAAI8N,GDEzB,IAGFzD,OAAOvC,KAAO,SAASlI,EAAQC,GAC7BiI,EAAUlI,EAAQC,IAGpBwK,OAAO0D,QAAS,WAEd,OAAOlB,OAAO,YAQhBxC,OAAO2D,OAAS,SAASpO,EAAQC,GAE/B,EAAgBD","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/**\n * \n * @param {string}   parent \n * @param {string}   id \n * @param {string}   titre \n * @param {string}   size     classe pour la taille de la boite modale <modal-xl||>\n */\nexport function createModal(parent, id, titre, size) {\n  var Div = document.createElement('div');\n  Div.className = \"modal fade\";\n  Div.id = id;\n  Div.setAttribute(\"role\", \"dialog\");\n  Div.setAttribute(\"aria-labelledby\", id);\n  Div.setAttribute(\"aria-hidden\", \"true\");\n  document.body.appendChild(Div);\n  var Div2 = document.createElement('div');\n  Div2.className = \"modal-dialog \"+size;\n  Div2.setAttribute(\"role\", \"document\");\n  Div.appendChild(Div2);\n  var Div3 = document.createElement('div');\n  Div3.className = \"modal-content\";\n  Div2.appendChild(Div3);\n  var Div4 = document.createElement('div');\n  Div4.className = \"modal-header\";\n  Div3.appendChild(Div4);\n  var Header = document.createElement('h5');\n  Header.className = \"modal-title\";\n  Header.innerText = titre;\n  Div4.appendChild(Header);\n  var Btn = document.createElement('button');\n  Btn.setAttribute(\"type\", \"button\");\n  Btn.setAttribute(\"data-dismiss\", \"modal\");\n  Btn.className = \"close\";\n  Div4.appendChild(Btn);\n  var Span = document.createElement('span');\n  Span.setAttribute(\"aria-hidden\", \"true\");\n  Span.innerText = \"x\";\n  Btn.appendChild(Span);\n  var DivContent = document.createElement('div');\n  DivContent.className = \"modal-body\";\n  DivContent.id = id + '-content';\n  Div3.appendChild(DivContent);\n  var DivFoot = document.createElement('div');\n  DivFoot.className = \"modal-footer\";\n  DivFoot.id = id + \"-footer\";\n  Div3.appendChild(DivFoot);\n\n  $('#' + id).on('show.bs.modal', function () {\n    $('#' + parent).css('opacity', 0.5);\n  });\n  $('#' + id).on('hidden.bs.modal', function () {\n    $('#' + parent).css('opacity', 1);\n    $('#' + id).remove();\n  });\n\n  // $('#'+id).modal('show');\n}\n\n/**\n * \n * @param {*} id \n * @param {*} Btns \n */\nexport function addButtons(id, Btns)\n{\n  Btns.forEach(function(Button){\n    var Btn = document.createElement('button');\n    Btn.setAttribute(\"type\", \"button\");\n    if( Button.Func.length != 0){\n      Btn.onclick = function () {\n        var call = Button.Func+\"('\"+Button.Action+\"','');\";\n        eval(call);         \n      };  \n    }\n    Btn.className = \"btn btn-\"+Button.type;\n    if( Button.Glyph == \"log-out\"){\n      Btn.setAttribute(\"data-dismiss\", \"modal\");\n    }\n    Btn.innerHTML = \"<span class='glyphicon glyphicon-\"+Button.Glyph+\"'></span> \"+Button.Label;\n    document.getElementById(id+\"-footer\").appendChild(Btn);\n  });\n}\n\n/**\n * alertBox\n * \n * Display an alert div \n * @param {string} sType        type de message <danger|info|success> \n * @param {string} sMessage     Message à afficher\n * @param {string} sTitre       Titre de la Box\n * @param {int} iDuration       Durée de l'affichage (optionnel 3000)\n */\nexport function alertBox(sType, sMessage, sTitre, iDuration) {\n  if (typeof (iDuration) == 'undefined') {\n    iDuration = 3000;\n  }\n  $(\"#ErrTitle\").text(sTitre);\n  $(\"#ErrMsg\").html(sMessage);\n  $(\"#ErrBox\").removeClass('alert-success');\n  $(\"#ErrBox\").removeClass('alert-danger');\n  $(\"#ErrBox\").removeClass('alert-info');\n  $(\"#ErrBox\").addClass('alert-' + sType);\n  $(\"#ErrBox\").show();\n  setTimeout(function () {\n    $(\"#ErrBox\").fadeOut(1000);\n  }, iDuration);\n}","import * as modal from './modal.js';\n/**\n * Gestion des contrats\n */\n\n/**\n * doAction  \n * \n * Aiguillage des demandes liées au contrat\n * @param {string} action   Action demandée\n * @param {objet} params    Paramètres requis\n */\nexport function doAction(action, params)\n{\n  switch(action)\n  {\n    case 'init':\n      initFormContact(0);\n      break;\n\n    case 'edit':\n      // Retrouver id\n      var id=params;\n      initFormContact(id);\n      break;\n    \n    case 'chooseProducer':\n      chooseUser('Producteur',\"Choisir un producteur\");\n      break;\n\n    case 'chooseReferent':\n      chooseUser('Referent',\"Choisir un référent\");\n      break;\n      \n    case 'chooseSuppleant':\n      chooseUser('Suppleant',\"Choisir un suppléant\");\n      break;\n      \n    case 'okProducteur':\n      $('#producer').val($('#user-choose :selected').text());\n      var id = $('#user-choose :selected').val();\n      document.getElementById('producer').dataset.id=id;\n      $('#choose-user').modal('hide');\n      break;\n\n    case 'okReferent':\n      $('#referent').val($('#user-choose :selected').text());\n      var id = $('#user-choose :selected').val();\n      document.getElementById('referent').dataset.id=id;\n      $('#choose-user').modal('hide');\n      break;\n\n    case 'okSuppleant':\n      $('#replace').val($('#user-choose :selected').text());\n      var id = $('#user-choose :selected').val();\n      document.getElementById('replace').dataset.id=id;\n      $('#choose-user').modal('hide');\n      break;\n  \n    case 'save':\n      // Enregistrer le contrat (données)\n      saveContrat(params);\n      break;\n\n    case 'doc':\n      // Modifier le document contrat\n      editDoc();\n      break;\n  \n    case 'uploadDoc':\n      // Ouvrir le navigateur pour choisir un fichier\n      uploadDoc();\n      break;\n\n    case 'loadDoc':\n      // Charger le .pdf\n      loadDoc();\n      break;\n\n    case 'okDoc':\n      // On a choisi le contrat\n      okDoc();\n      break;\n\n    case 'livraison':\n      // gère les livraisons\n      livraison();\n      break; \n    \n    case 'addLivraison':\n      editLivraison(0);\n      break;\n\n    case 'validLivraison':\n      validLivraison(params);\n      break;\n\n    case 'editLivraison':\n      editLivraison(params);\n      break;\n  \n    case 'delLivraison':\n      delLivraison(params);\n      break;\n    \n    case 'addWait':\n      chooseUser('Wait', \"Ajouter à la liste d'attente\");\n      break;\n\n    case 'okWait':\n      okWait();\n      break;\n\n    case 'delWait':\n      delWait(params);\n      break;\n\n    case 'acceptWait':\n      // TODO pas implémenté\n      alert(\"Pas implémenté - accepter liste\");\n      break;\n\n    case 'new':\n      alert('Pas implémenté - nouvelle saison ');\n      break;      \n\n    case 'view':\n      alert('Pas implémenté - détail utilisateur');\n      break;      \n\n    case 'valideContrat':\n      alert('Pas implémenté - paiement reçu ?');\n      break;      \n        \n    case 'addUser':\n      chooseUser('User', \"Ajouter au contrat\");\n      break;\n\n    case 'okUser':\n      okUser();\n      break;\n    \n    case 'editRules':\n      // Gestion des règles\n      editRules();\n      break; \n\n    case 'editProduct':\n      editProduct(params);\n      break;\n\n    case 'okProduct':\n      saveProduct();\n      break;\n\n    case 'delProduct':\n      delProduct(params);\n      break;\n\n    default:\n      console.log(\"Dans contrat - doAction: \"+action);\n      break;  \n  }\n}\n\n/**\n * Création du formulaire d'édition du contrat\n * \n * @param {int} id    contrat à modifier, 0 si nouveau\n */\nfunction initFormContact(id)\n{\n  modal.createModal(\"id-contrat\", \"contrat-edit\", \"Gestion de contrat\",\"modal-xl\");\n  // Ajout du contenu contrat-edit-content\n  data ={\n    Action: \"Content\",\n    Content: \"ContratEdit\"\n  };\n  $.post(\"/ajax/index.php\", data, function (data) {\n    $('#contrat-edit-content').html(data);\n    document.getElementById('contractName').dataset.id = id;\n  });\n  var Btns=[{\n    Label:    \"Enregistrer\",\n    Func:     \"contrat\",\n    Action:   \"save\",\n    Glyph:    \"save\",\n    type:     \"primary\"\n  },{\n    Label:    \"Nouvelle saison\",\n    Func:     \"contrat\",\n    Action:   \"new\",\n    Glyph:    \"repeat\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  if( id != 0){\n    // get data\n    data={\n      Action: \"contrat\",\n      Want:   \"getInfo\",\n      Vars:   id\n    }\n    $.post(\"/ajax/index.php\", data, function (resp) {\n      console.log(resp);\n      $('#contractName').val(resp.Data[0].Name);\n      document.getElementById('contractName').dataset.id=resp.Data[0].id;\n      $('#contratType option[value=\"'+resp.Data[0].idContratType+'\"]').prop('selected', true);\n      $('#producer').val(resp.Data[0].Producteur);\n      document.getElementById('producer').dataset.id=resp.Data[0].IdProducteur;\n      $('#referent').val(resp.Data[0].Referent);\n      document.getElementById('referent').dataset.id=resp.Data[0].IdReferent;\n      $('#replace').val(resp.Data[0].Suppleant);\n      document.getElementById('replace').dataset.id=resp.Data[0].IdSuppleant;\n      $('#currentSeason').val(resp.Data[0].EnCours);\n      $(\"#h3-season\").text(resp.Data[0].EnCours);\n      if( resp.Data[0].Verouille == 1){\n        $('#locked').prop(\"checked\",true);\n      } else {\n        $('#locked').prop(\"checked\",false);\n      }\n      var Debut = resp.Data[0].DebutContrat;\n      var debContrat = Debut.substr(8,2)+\"/\"+Debut.substr(5,2);\n      $('#contract-start').val(debContrat);\n      var Fin = resp.Data[0].FinContrat;\n      var finContrat = Fin.substr(8,2)+\"/\"+Fin.substr(5,2);\n      $('#contract-end').val(finContrat);\n      $('#nbPeople').val(resp.Data[0].nbPermanence);\n      $('#amount').val(resp.Data[0].PrixContrat);\n      var contratDoc = resp.Data[0].Document;\n      $('#contrat-doc').text(contratDoc.replace(/.*\\//, ''));\n      $('#contrat-doc').attr(\"href\",resp.Data[0].Document);\n      refreshWaitingList();\n      refreshUserList(id);\n      refreshProduct(id);\n    });\n  }\n  modal.addButtons(\"contrat-edit\",Btns);\n  $('#contrat-edit').modal('show');\n  // Action à la fermeture du contrat\n  $('#contrat-edit').on('hidden.bs.modal', function () {\n    refreshListeContrat();\n  });\n}\n\nfunction chooseUser(type, title)\n{\n  modal.createModal(\"contrat-edit\", \"choose-user\", title,\"modal-sm\");\n  var Btns=[{\n    Label:    \"Choisir\",\n    Func:     \"contrat\",\n    Action:   \"ok\"+type,\n    Glyph:    \"ok\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"choose-user\",Btns);\n  var sel = document.createElement('select');\n  sel.id=\"user-choose\";\n  sel.className=\"form-control\";\n  sel.style.height=\"200px\";\n  sel.style.minHeight=\"200px\";\n  sel.multiple=true;\n  var div = document.getElementById('choose-user-content');\n  div.appendChild(sel);\n  var i =0;\n  data={\n    Action:  \"contrat\",\n    Want:    \"get\"+type\n  };\n  $.post(\"/ajax/index.php\", data, function (resp) {\n    resp.forEach(function(user){\n      var option = document.createElement('option');\n      option.text = user.Raisoc;\n      option.value = user.id;\n      sel.add(option);\n\n    });\n  });\n\n  $('#choose-user').modal('show');\n}\n\n/**\n * enregistre le contrat en cours d'édition\n * @param {bool} quit   si vrai, alors ferme le modal (valeur par défaut)\n */\nfunction saveContrat(quit)\n{\n\n  // TODO Toujours verrouillé - Bug\n  if( quit == undefined){\n    quit=true;\n  }\n  var formValid = true;\n  // Valider si on a bien les infos\n  if( $('#contractName').val() == \"\"){\n    formValid = false;\n    $('#contractName').addClass('required');\n  } else {\n    $('#contractName').removeClass('required');\n  }\n  var sPost='';\n  sPost += '{\"id\":\"'+document.getElementById(\"contractName\").dataset.id+'\",';\n  sPost += '\"Name\":\"'+document.getElementById(\"contractName\").value+'\",';\n  sPost += '\"Type\":\"'+$(\"#contratType :selected\").val()+'\",';\n  var idProducer = document.getElementById(\"producer\").dataset.id;\n  if( idProducer == '0'){\n    formValid = false;\n    $('#producer').addClass('required');\n  } else {\n    $('#producer').removeClass('required');\n  }\n  sPost += '\"idProducteur\":\"'+idProducer+'\",';\n  var idReferent = document.getElementById(\"referent\").dataset.id;\n  if( idReferent == '0'){\n    formValid = false;\n    $('#referent').addClass('required');\n  } else {\n    $('#referent').removeClass('required');\n  }\n  sPost += '\"idReferent\":\"'+idReferent+'\",';\n  var idSuppleant = document.getElementById(\"replace\").dataset.id;\n  \n  sPost += '\"idSuppleant\":\"'+idSuppleant+'\",';\n  sPost += '\"curSeason\":\"'+$(\"#currentSeason\").val()+'\",';\n  if($(\"#locked\").is(\":checked\")){\n    sPost += '\"locked\":\"true\",';\n  } else {\n    sPost += '\"locked\":\"false\",';\n  }\n  sPost += '\"Start\":\"'+$(\"#contract-start\").val() +'\",';\n  sPost += '\"End\":\"'+$(\"#contract-end\").val() +'\",';\n  sPost += '\"nbPeople\":\"'+$(\"#nbPeople\").val()+'\",';\n  sPost += '\"Document\":\"'+$('#contrat-doc').attr('href')+'\",'; \n  sPost += '\"price\":\"'+$(\"#amount\").val()+'\"}';\n  if( formValid ){\n    console.log(sPost);\n    var data={\n      Action: \"contrat\",\n      Want:   \"save\",\n      Vars:   sPost\n    }\n    $.post('/ajax/index.php',data,function(resp){\n      if(resp.Errno != 0){\n        alert(resp.ErrMsg);\n        return false;\n      }\n      if( quit ){\n        $('#contrat-edit').modal('hide');\n      }\n    });\n    // TODO refreshContrat()\n  } else {\n    alert('Le contrat est invalide, veuillez le compléter');\n  }\n}\n\n\nfunction editDoc()\n{\n  // TODO save si id == 0\n  modal.createModal(\"contrat-edit\", \"edit-doc\", \"Contrat papier\",\"modal-sm\");\n  var Btns=[{\n    Label:    \"Choisir\",\n    Func:     \"contrat\",\n    Action:   \"okDoc\",\n    Glyph:    \"ok\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"edit-doc\",Btns);\n  var doc = document.getElementById('edit-doc-content');\n  var p = document.createElement('p');\n  p.innerHTML = \"Document actuel: \"+$('#contrat-doc').text();\n  doc.appendChild(p);\n  var p = document.createElement('p');\n  p.innerHTML = \"Anciens contrats \";\n  doc.appendChild(p);\n  var select = document.createElement('select');\n  select.id = \"liste-doc\";\n  select.className = \"form-control\";\n  select.setAttribute(\"multiple\", true);\n  select.style.height=\"100px\";\n  doc.appendChild(select);\n  var p = document.createElement('p');\n  p.innerHTML=\"<br /><span class='glyphicon glyphicon-download-alt'></span> Télécharger nouveau contrat\";\n  p.onclick = function(){\n    contrat('uploadDoc',\"\");\n  };\n  doc.appendChild(p);\n  var input = document.createElement('input');\n  input.type=\"file\";\n  input.id='docFile';\n  input.style.display=\"none\";\n  input.onchange=function(){\n    contrat('loadDoc','');\n  }\n  doc.appendChild(input);\n  data={\n    Action:  \"contrat\",\n    Want:    \"getDocs\",\n    Vars:    $('#contractName').val()\n  };\n  $.post(\"/ajax/index.php\", data, function (resp) {\n    var contrat = document.getElementById(\"contractName\").dataset;\n    contrat.folder=resp.Folder;\n    resp.Files.forEach(function(File){\n      var option = document.createElement('option');\n      option.text = File;\n      select.add(option);\n    });\n  });\n  $('#edit-doc').modal('show');\n}\n\nfunction uploadDoc()\n{\n  // Déclencher le bouton input\n  document.getElementById('docFile').click(); \n}\n\nfunction loadDoc()\n{\n  // Charge le fichier \n  var file_data = $('#docFile').prop('files')[0];\n  var form_data = new FormData();\n  form_data.append('file', file_data);\n  form_data.append('Action', 'contrat');\n  form_data.append('Want',   'uploadDoc');\n  form_data.append('Vars',   $('#contractName').val());\n  // Demande à .php le chargement du fichier\n  $.ajax({\n    url: \"/ajax/index.php\",\n    data: form_data,\n    cache: false,\n    contentType: false,\n    processData: false,\n    type: 'post',\n    success: function (resp) {\n      // Rafraichir la liste\n      data={\n        Action:  \"contrat\",\n        Want:    \"getDocs\",\n        Vars:    $('#contractName').val()\n      };\n      $('#liste-doc').empty();\n      var select = document.getElementById('liste-doc');\n      $.post(\"/ajax/index.php\", data, function (resp) {\n        resp.Files.forEach(function(File){\n          var option = document.createElement('option');\n          option.text = File;\n          select.add(option);\n        });\n      });\n    },\n    failed: function(resp){\n      console.log(resp);\n    }\n  });    \n}\n\n\nfunction okDoc()\n{\n  var contrat = document.getElementById(\"contractName\").dataset;\n  $('#contrat-doc').text($('#liste-doc :selected').text());\n  $('#contrat-doc').attr('href',contrat.folder+\"/\"+$('#liste-doc :selected').text());\n  $('#edit-doc').modal('hide');\n}\n\n\nfunction livraison()\n{\n  // TODO save si id=0\n  modal.createModal(\"contrat-edit\", \"edit-livraison\", \"Gestion des livraisons\",\"\");\n  var Btns=[{\n    Label:    \"Ajouter\",\n    Func:     \"contrat\",\n    Action:   \"addLivraison\",\n    Glyph:    \"plus\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"edit-livraison\",Btns);\n  $('#edit-livraison-content').css(\"minHeight\",\"300px\");\n  $('#edit-livraison-content').css(\"Height\",\"300px\");\n  var table = document.createElement('table');\n  table.className=\"table-condensed table-hover\";\n  var thead = document.createElement('thead');\n  table.appendChild(thead);\n  var row = thead.insertRow();\n  var cell = row.insertCell();\n  cell.innerHTML = \"Date\";\n  var cell = row.insertCell();\n  cell.innerHTML = \"Numéro\";\n  var cell = row.insertCell();\n  cell.innerHTML = \"Montant\";\n  var cell = row.insertCell();\n  cell.innerHTML = \"&nbsp;\";\n  $('#edit-livraison-content').append(table);\n  var tbody = document.createElement('tbody');\n  tbody.id=\"liste-livraison-body\";\n  table.appendChild(tbody);\n  refreshLivraison();\n  $('#edit-livraison').modal('show');\n}\n\nfunction editLivraison(id)\n{\n  var el = document.getElementById('liste-livraison-body');\n  if( id == 0 ){\n    var row = el.insertRow();\n    row.id=\"liste-livraison-row-0\";\n    var rowDate='';\n    var rowNum=0;\n    var rowMontant=\"0\";\n  } else {\n    var row = document.getElementById(\"liste-livraison-row-\"+id);\n    var rowDate=row.cells[0].innerText;\n    var rowNum=row.cells[1].innerText;\n    var Montant = row.cells[2].innerText;\n    var rowMontant=Montant.substr(0,Montant.length-2);\n    row.innerHTML=\"\";\n  }\n  var cell = row.insertCell();\n  var inp = document.createElement('input');\n  inp.type=\"text\";\n  inp.id=\"liste-livraison-date\";\n  inp.style.width='100px';\n  inp.value=rowDate;\n  cell.appendChild(inp);\n  var cell = row.insertCell();\n  var inp = document.createElement('input');\n  inp.type=\"text\";\n  inp.id=\"liste-livraison-index\";\n  inp.style.width='40px';\n  inp.value=rowNum;\n  cell.appendChild(inp);\n  var cell = row.insertCell();\n  cell.style.textAlign=\"right\";\n  var inp = document.createElement('input');\n  inp.type=\"text\";\n  inp.id=\"liste-livraison-montant\";\n  inp.style.width='80px';\n  inp.value=rowMontant;\n  cell.appendChild(inp);\n  var cell = row.insertCell();\n  cell.innerHTML=\"<span class='glyphicon glyphicon-ok'></span>\";\n  cell.style.textAlign=\"right\";\n  cell.onclick= function(){\n    contrat('validLivraison',id);\n  };\n  $( \"#liste-livraison-date\" ).datepicker({\n    altField: \"#contract-end\",\n    closeText: 'Fermer',\n    prevText: 'Précédent',\n    nextText: 'Suivant',\n    currentText: 'Aujourd\\'hui',\n    monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],\n    monthNamesShort: ['Janv.', 'Févr.', 'Mars', 'Avril', 'Mai', 'Juin', 'Juil.', 'Août', 'Sept.', 'Oct.', 'Nov.', 'Déc.'],\n    dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],\n    dayNamesShort: ['Dim.', 'Lun.', 'Mar.', 'Mer.', 'Jeu.', 'Ven.', 'Sam.'],\n    dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],\n    weekHeader: 'Sem.',\n    dateFormat: 'dd/mm/yy'\n    });\n}\n\nfunction validLivraison(id)\n{\n  // TODO automatisation sys_livraison_produit / sys_permanence\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  // Lire les valeurs\n  var rowDate = $('#liste-livraison-date').val();\n  var rowIndex = $('#liste-livraison-index').val();\n  var sRowMontant = $('#liste-livraison-montant').val();\n  var rowMontant = parseFloat(sRowMontant).toFixed(2);\n  var sVars='{\"id\":\"'+id+'\",\"idContrat\":\"'+idContrat+'\",\"frDate\":\"';\n  sVars += rowDate+'\",\"numLivraison\":\"'+rowIndex;\n  sVars += '\",\"Montant\":\"'+rowMontant+'\"}';\n  data = {\n    Action: \"contrat\",\n    Want:   \"saveLivraison\",\n    Vars:   sVars\n  };\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n    }\n    refreshLivraison();\n  });\n}\n\nfunction delLivraison(id)\n{\n  if( !confirm(\"Supprimer la livraison ?\") ){\n    return false;\n  }\n  data = {\n    Action: \"contrat\",\n    Want:   \"delLivraison\",\n    Vars:   id\n  };\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n    }\n    refreshLivraison();\n  });\n}\n\nfunction refreshLivraison()\n{\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  var tbody = document.getElementById('liste-livraison-body');\n  tbody.innerHTML=\"\";\n  data={\n    Action: \"contrat\",\n    Want:   \"listLivraison\",\n    Vars:   idContrat\n  };\n  $.post(\"/ajax/index.php\",data,function(resp){\n    if( resp.Errno != 0){\n      alert(resp.ErrMsg);\n    }\n    console.log(resp);\n    resp.Datas.forEach(function (sRow){\n      var row = tbody.insertRow();\n      row.id = \"liste-livraison-row-\"+sRow.id;\n      var cell = row.insertCell();\n      cell.innerHTML= sRow.frDate;\n      var cell = row.insertCell();\n      cell.innerHTML= sRow.numLivraison;\n      var cell = row.insertCell();\n      cell.style.textAlign=\"right\";\n      cell.innerHTML= sRow.Montant+\"<span> €</span>\";    \n      var cell = row.insertCell();\n      var Html  = \"<span class='glyphicon glyphicon-trash' data-toggle='tooltip' title='Supprimer' \";\n      Html += \"onClick=\\\"contrat('delLivraison',\"+sRow.id+\");\\\"></span>\";    \n      Html += \" <span class='glyphicon glyphicon-pencil' data-toggle='tooltip' title='Modifier' \";\n      Html += \"onClick=\\\"contrat('editLivraison',\"+sRow.id+\");\\\"></span>\"; \n      cell.style.textAlign = \"right\";   \n      cell.innerHTML = Html;\n    });\n  });\n}\n\nfunction okWait()\n{\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  var id = $('#user-choose :selected').val();\n  var sVars='{\"id\":\"'+id+'\",\"idContrat\":\"'+idContrat+'\"}';\n  data={\n    Action: 'contrat',\n    Want:   'addWaitUser',\n    Vars:   sVars\n  };\n  $.post(\"/ajax/index.php\",data, function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    refreshWaitingList();\n    $('#choose-user').modal('hide');\n  });\n}\n\nfunction delWait(id)\n{\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  var sVars='{\"id\":\"'+id+'\",\"idContrat\":\"'+idContrat+'\"}';\n  data={\n    Action: 'contrat',\n    Want:   'delWaitUser',\n    Vars:   sVars\n  };\n  $.post(\"/ajax/index.php\",data, function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    $('#choose-user').modal('hide');\n    refreshWaitingList();\n  });\n}\n\nfunction refreshWaitingList()\n{\n  console.log(\"Rafraichir la liste\");\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  data={\n    Action: \"contrat\",\n    Want:   \"listWait\",\n    Vars:   idContrat\n  };\n  var tbody = document.getElementById(\"waiting-list\");\n  tbody.innerHTML=\"\";\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno == -1 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    resp.Wait.forEach(function(line){\n      var row = tbody.insertRow();\n      var cell = row.insertCell();\n      cell.innerHTML = line.frDate;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Raisoc;\n      var cell = row.insertCell();\n      cell.innerHTML = line.sTelMobile;\n      var cell = row.insertCell();\n      cell.style.textAlign=\"right\";\n      var Html  = \"<span class='glyphicon glyphicon-thumbs-up pointer' \";  \n      Html += \" data-toggle='tooltip' title='Accepter' \";\n      Html += \"onclick='contrat(\\\"acceptWait\\\",\"+line.id+\");'></span> \";\n      Html += \"<span class='glyphicon glyphicon-trash pointer' \";  \n      Html += \" data-toggle='tooltip' title='Retirer de la liste' \";\n      Html += \"onclick='contrat(\\\"delWait\\\",\"+line.id+\");'></span>\";\n      cell.innerHTML = Html;\n    });\n  });\n}\n\n\nfunction okUser()\n{\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  var id = $('#user-choose :selected').val();\n  var sVars='{\"id\":\"'+id+'\",\"idContrat\":\"'+idContrat+'\"}';\n  data={\n    Action: 'contrat',\n    Want:   'addUser',\n    Vars:   sVars\n  };\n  $.post(\"/ajax/index.php\",data, function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    console.log(resp.ErrMsg);\n    refreshUserList(idContrat);\n    $('#choose-user').modal('hide');\n  });\n}\n\nfunction refreshUserList(id)\n{\n  if( id != undefined ){\n    var idContrat = id;\n  } else {\n    var elContrat = document.getElementById('contractName');\n    var idContrat = elContrat.dataset.id;\n  }\n  data={\n    Action:  \"contrat\",\n    Want:    \"refreshUserList\",\n    Vars:    idContrat\n  };\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno == -1){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    var tbody = document.getElementById('user-list');\n    tbody.innerHTML=\"\";\n    resp.Data.forEach(function(line){\n      var row = tbody.insertRow();\n      // row.onclick=function(){\n\n      // };\n      var cell = row.insertCell();\n      cell.innerHTML = line.dateInscription;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Nom;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Prenom;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Telephone;\n      var cell = row.insertCell();\n      cell.style.textAlign=\"right\";\n      var Html  = \"<input type='checkbox' data-toggle='tooltip'\";\n      Html += \" title='Contrat en cours' \";\n      Html += \"onchange=\\\"contrat('valideContrat',\"+line.id+\");\\\">&nbsp;&nbsp;&nbsp;\";\n      Html += \"<span class='glyphicon glyphicon-search' data-toggle='tooltip' \";\n      Html += \"title='Voir le détail' onclick=\\\"contrat('view',\"+line.id+\");\\\"></span>\";\n      cell.innerHTML = Html;\n\n    });\n  });\n}\n\nfunction editProduct(id)\n{\n  modal.createModal(\"contrat-edit\", \"edit-product\", \"Edition produit\",\"\");\n  var Btns=[{\n    Label:    \"Valider\",\n    Func:     \"contrat\",\n    Action:   \"okProduct\",\n    Glyph:    \"ok\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"edit-product\",Btns);\n  $('#edit-product-content').load('/tools/templates/product.smarty');\n  if( id != 0 ){\n    data = {\n      Action: \"contrat\",\n      Want:   \"loadProduct\",\n      Vars:   id\n    };\n    $.post(\"/ajax/index.php\",data,function(resp){\n      if( resp.Errno != 0 ){\n        alert(resp.ErrMsg);\n        return false;\n      }\n      $('#label').val(resp.Data[0].Label);\n      var label = document.getElementById('label');\n      label.dataset.id = id;\n      $('#unite').val(resp.Data[0].Unite);\n      $('#max').val(resp.Data[0].MaxLivraison);\n      $('#prix').val(resp.Data[0].prix);\n      $('#description').val(resp.Data[0].Description);\n      return;\n    });\n  }\n  $('#edit-product').modal('show');\n}\n\nfunction saveProduct()\n{\n  var el = document.getElementById('label');\n  var id = el.dataset.id;\n  var label = el.value;\n  if (label == \"\"){\n    alert(\"Le label est obligatoire\");\n    return false;\n  }\n  var unite = document.getElementById('unite').value;\n  var max = document.getElementById('max').value;\n  var prix = document.getElementById('prix').value;\n  var elContrat = document.getElementById('contractName');\n  var idContrat = elContrat.dataset.id;\n  var description = document.getElementById('description').value;\n\n  var sVars= '{\"id\":\"'+id+'\",\"idContrat\":\"';\n  sVars += idContrat +'\",\"label\":\"'+label+'\",\"unite\":\"';\n  sVars += unite +'\",\"max\":\"'+max+'\",\"prix\":\"';\n  sVars += prix+'\",\"description\":\"'+description+'\"}';\n\n  data = {\n    Action:  \"contrat\",\n    Want:    \"saveProduct\",\n    Vars:    sVars\n  }\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    $('#edit-product').modal('hide');\n    refreshProduct(idContrat);\n  });\n}\n\nfunction refreshProduct(id)\n{\n  data = {\n    Action:  \"contrat\",\n    Want:    \"listProduct\",\n    Vars:    id\n  }\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    var tbody = document.getElementById('product-list');\n    tbody.innerHTML=\"\";\n    resp.Data.forEach(function(line){\n      var row = tbody.insertRow();\n      row.onclick= function(){\n        contrat('editProduct',line.id);\n      };\n      var cell = row.insertCell();\n      cell.innerHTML=line.Label;\n      var cell = row.insertCell();\n      cell.innerHTML=line.Unite;\n      var cell = row.insertCell();\n      cell.innerHTML=line.Prix;\n      var cell = row.insertCell();\n      cell.style.textAlign=\"right\";\n      var Html = \"<span class='glyphicon glyphicon-trash' \";\n      Html += \"data-toggle='tooltip' title='Supprimer' \";\n      Html += \"onclick=\\\"contrat('delProduct',\"+line.id+\");\\\"></span>\";\n      cell.innerHTML =Html;\n    });\n    console.log(resp);\n  });\n}\n\nfunction delProduct(id)\n{\n  console.log(\"Dans delProduct \"+id);\n  data = {\n    Action:  \"contrat\",\n    Want:    \"delProduct\",\n    Vars:    id\n  }\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    var elContrat = document.getElementById('contractName');\n    var idContrat = elContrat.dataset.id;\n    console.log(\"refresh \"+idContrat);\n    refreshProduct(idContrat);\n  });\n}\n\nfunction editRules()\n{\n  modal.createModal(\"contrat-edit\", \"edit-rules\", \"Règles de fonctionnement\",\"\");\n  var Btns=[{\n    Label:    \"Accepter\",\n    Func:     \"contrat\",\n    Action:   \"okAttente\",\n    Glyph:    \"ok\",\n    type:     \"primary\"\n  },{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"edit-rules\",Btns);\n  $('#edit-rules-content').css(\"Height\",\"250px\");\n  $('#edit-rules-content').css(\"minHeight\",\"250px\");\n  var aera = document.createElement('textarea');\n  aera.style.height=\"100%\";\n  aera.style.width='100%';\n  $('#edit-rules-content').append(aera);\n  $('#edit-rules').modal('show');\n}\n\nfunction refreshListeContrat()\n{\n  console.log(\"dans refreshListeContrat\");\n  var tbody = document.getElementById('liste-contrat');\n  tbody.innerHTML = \"\";\n  data={\n    Action: \"contrat\",\n    Want:   \"listeContrat\",\n    Vars:   \"\"\n  }\n  $.post('/ajax/index.php',data,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n      return false;\n    }\n    resp.Data.forEach(function(line){\n      var row = tbody.insertRow();\n      row.onclick = function(){\n        contrat('edit',line.id);\n      };\n      var cell = row.insertCell();\n      cell.innerHTML = line.label;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Type;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Producteur;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Referent;\n      var cell = row.insertCell();\n      cell.innerHTML = line.Verouille;\n    });\n  });\n}","import * as modal from './modal.js';\n\nvar inputToField = [  // @var tableau des champs de la table\n  \"id\",\"sEmail\",\"sNom\",\"sPrenom\",\"sAdresse\",\"sCodePostal\",\n  \"sVille\",\"sTelephone\",\"sTelMobile\",\"sLogin\",\"dateIns\"];\n\n/**\n * Aiguillage des demandes \n * \n * @param {string} action \n * @param {string} params \n */\nexport function user(action,params)\n{\n  if( action == undefined ){\n    // appel sans paramètre, depuis le menu\n    editUsers();\n    return false;\n  }\n  switch(action)\n  {\n    case 'login':\n      loadContent('Login');\n      break; \n    \n    case 'logout':\n      $('#content').load('/templates/logout.smarty')\n      break;\n\n    case 'quit':\n      document.getElementById('cnx-info').dataset.connected='0';\n      $.ajax({\n        type: 'GET',\n        url: 'ajax/logout.php',\n        success: function (msg) {\n          setTimeout(function () {\n            window.location.href = '/index.php';\n          }, 500);    \n        }\n      });\n      break;\n\n    case 'changePass':\n      changePass();\n      break;  \n\n    case 'auth':\n      // Connexion au site\n      authenticate();\n      break;\n\n    case 'add':\n      user('edit',0);\n      break;\n\n    case 'save':\n      saveUser(); \n      break;\n\n    case 'del':\n      delUser(params);\n      break;\n\n    case 'uniqueEmail':\n      uniqueEmail(params);\n      break;\n\n    case 'edit':\n      editUser(params);\n      break;\n\n    case 'pwd':\n      pwdUser(params);\n      break;\n\n    case 'Password':\n      initPassword();\n      break;\n\n    default:\n      alert(\"Non implémenté \"+action+\" \"+params);\n  }\n}\n\n/**\n * editUsers\n * \n * Fonction appelée par le menu d'édition des utilisateurs\n */\nfunction editUsers() {\n  modal.createModal(\"content\", \"user-manage\", \"Gestion des utilisateurs\",\"modal-xl\");\n  $(\"#user-manage-content\").addClass('myModal-body');\n  var Btns=[{\n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.addButtons(\"user-manage\",Btns);\n  refreshUser();\n  $('#user-manage').modal('show');\n}\n\n/**\n * Edition d'un utilisateur\n * \n * @param {int} id \n */\nfunction editUser(id)\n{\n  var Btns=[{\n    Label:    \"Enregistrer\",\n    Func:     \"user\",\n    Action:   \"save\",\n    Glyph:    \"ok\",\n    type:     \"primary\"\n  },{  \n    Label:    \"Quitter\",\n    Func:     \"\",\n    Action:   \"\",\n    Glyph:    \"log-out\",\n    type:     \"secondary\"\n  }];\n  modal.createModal(\"user-manage\", \"user-edit\", \"Edition utilisateur\",\"\");\n  modal.addButtons(\"user-edit\",Btns);\n  $('#user-edit-content').load(\"/tools/templates/userEdit.smarty\", function () {\n    loadUser(id);\n    $('#user-edit').modal('show');\n  });\n}\n\nfunction refreshUser()\n{\n  data = {\n    Action: \"User\",\n    Want: \"listUsers\",\n    Vars: \"\"\n  };\n  $.post('/ajax/index.php', data, function (resp) {\n    $(\"#user-manage-content\").html(resp.html);\n  });\n}\n\n/**\n * authenticate\n * \n * Authentification d'un utilisateur par appel Ajax\n * \n * @param {void}\n */\nfunction authenticate() {\n  var login = $(\"#login\").val();\n  var passw = $(\"#password\").val();\n  if (login == \"\" || passw == \"\") {\n    modal.alertBox('danger', 'Vous devez saisir un login et un mot de passe !', 'ERREUR');\n    return false;\n  }\n  var sVars='{\"login\":\"'+login+'\",\"passw\":\"'+passw+'\"}';\n  data = {\n    Action:   \"User\",\n    Want:     \"Login\",\n    Vars:     sVars\n  };\n  $.post(\"/ajax/index.php\", data,function (resp) {\n      if (resp.Errno == -1) {\n        modal.alertBox(\"danger\",resp.ErrMsg,'ERREUR');\n        return false;\n      }\n      console.log(\"Connexion OK\");\n      var cnx = document.getElementById('cnx-info');\n      cnx.innerHTML = \"<span class='glyphicon glyphicon-user'></span> \" + resp.User.Prenom + \" \" + resp.User.Nom;\n      cnx.dataset.connected=1;\n      cnx.onclick = function() {\n        user('logout','');\n      };\n      // A VOIR Si membre du groupe admin, il faut charger tools.js ...\n\n      // recharge la page d'accueil\n      loadContent(\"Main\");\n      // recharger le menu\n      loadMenu();\n    });\n}\n\n/**\n * loadUser \n * \n * charge les données du formulaire avec les données de l'utilisateur en base\n * @param {int}   id    identifiant de l'utilisateur\n */\nfunction loadUser(id)\n{\n  if( id == 0 ){\n    return true;\n  }\n  data = {\n    Action:   \"User\",\n    Want:     \"loadUserId\",\n    Vars:     id\n  }\n  $.post(\"/ajax/index.php\", data, function (resp) {\n    if (resp.Errno != 0) {\n      alert(resp.ErrMsg);\n      return false;\n    }\n    // Remplacer les données du formulaire avec celles de la table\n    inputToField.forEach(function (item) {\n      document.getElementById(item).value = resp.User[item];\n    });\n    // gestion des droits\n    resp.Rights.forEach(function (right) {\n      var Div = document.createElement('div');\n      var input = document.createElement('input');\n      var label = document.createElement('label');\n      input.value = right.idRight;\n      input.type = 'checkbox';\n      input.name = 'rights';\n      input.checked = right.gotRight;\n      Div.appendChild(input);\n      label.setAttribute(\"for\", right.idRight);\n      label.innerText = right.sLabel;\n      Div.appendChild(label);\n      document.getElementById('checkRights').appendChild(Div);\n    });\n  });\n}\n\nfunction saveUser()\n{\n  // Test des champs obligatoires\n  var mail = document.getElementById('sEmail').value;\n  if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n    // OK return (true)\n  }else{\n    $('sEmail').addClass('required');\n    alert(\"Le mail est incorrect !\")\n    return false;\n  }\n  if( mail == \"\" ){\n    $('sEmail').addClass('required');\n    alert(\"Le mail est obligatoire !\")\n    return false;\n  }\n  $('sEmail').removeClass('required');\n  var nom = document.getElementById('sNom').value;\n  if( nom == \"\"){\n    $('sNom').addClass('required');\n    alert(\"Le Nom est obligatoire !\")\n    return false;\n  }\n  $('sNom').removeClass('required');\n  // {\"User\":{\"id\":1,\"sNom\":\"Noel\"},\"Rights\":{\"1\",\"3\",\"7\"}}\n  var data = '{\"User\":{';\n  // Remplacer les données du formulaire avec celles de la table\n  inputToField.forEach(function (item) {\n    if( item != \"dateIns\"){\n      data += '\"'+ item +'\":\"' + $('#' + item).val() + '\",';\n    }\n  });\n  // La dernière virgule est en trop\n  data = data.substring(0, data.length - 1);\n  data += '},\"Rights\":[';\n  // Récupérer les droits\n  var exist = false;\n  $('#checkRights input:checked').each(function () {\n    data += '\"' + $(this).val() + '\",';\n    exist = true;\n  });\n  if (exist) {\n    data = data.substring(0, data.length - 1);\n  }\n  data += \"]}\";\n  // Envoi au backend\n  var send = {\n    Action:  \"User\",\n    Want:    \"save\",\n    Vars:    data\n  };\n  $.post('/ajax/index.php',send,function(resp){\n    if( resp.Errno != 0 ){\n      alert(resp.ErrMsg);\n    }\n    refreshUser();\n    $('#user-edit').modal('hide');\n  });\n}\n\n/**\n * uniqueEmail\n * \n * Validation de l'unicité d'un email dans la base\n * @param {string} email \n */\nfunction uniqueEmail(email)\n{\n  // Vérifions que c'est un email\n  if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email)) {\n    // OK return (true)\n  } else {\n    alert(\"Ce n'est pas un email valide !\");\n    document.getElementById('sEmail').value=\"\";\n    $('#sEmail').focus();\n    return false;\n  }\n  // Vérification que l'email est unique, appelé lors \n  // d'un changement du champs Email\n  data = {\n    Action:   \"User\",\n    Want:     \"testEmail\",\n    Vars:     email\n  };\n  $.post(\"/ajax/index.php\", data, function (resp) {\n    if (resp.Errno != 0) {\n      if (confirm(resp.ErrMsg)) {\n        loadUser(resp.id);\n      } else {\n        $('#sEmail').val('');\n        $('#sEmail').focus();\n      }\n      return false;\n    }\n    if ($('#sLogin').val() == \"\") {\n      $('#sLogin').val($('#sEmail').val());\n    }\n  });\n  return true;\n}\n\nfunction delUser(id)\n{\n  var el = document.getElementById('user-'+id);\n  var Msg = \"Effacer \"+el.cells[0].innerText+\" \"+el.cells[1].innerText+\" ?\";\n  if (confirm(Msg))\n    // Effacer\n    data = {\n      Action:  \"User\",\n      Want:    \"delUser\",\n      Vars:    id\n    };\n  console.log(data);\n  $.post('/ajax/index.php', data, function(resp){\n    if( resp.Errno != 0){\n      alert(resp.ErrMsg);\n    }\n    refreshUser();\n  });\n}\n\nfunction pwdUser(id)\n{\n  var el = document.getElementById('user-'+id);\n  var Msg = \"Nouveau mot de passe pour \"+el.cells[0].innerText+\" \"+el.cells[1].innerText+\" ?\";\n  var passwd = prompt(Msg);\n  var sVars = '{\"id\":\"'+id+'\",\"passwd\",\"'+passwd+'\"}';\n  if (passwd) {\n    data = {\n      Action:   'User',\n      Want:     'changePassId',\n      Vars:     sVars\n    }\n    $.post(\"/ajax/index.php\", data);\n  }\n}\n\nfunction initPassword()\n{\n  var login = $('#login').val();\n  if( login == \"\"){\n    alert(\"Vous devez donner votre email ou votre login !\");\n    return false;\n  }\n  data = {\n    Action:   'User',\n    Want:     'resetPass',\n    Vars:     login\n  }\n  $.post(\"/ajax/index.php\", data, function(resp){\n    if(resp.Errno != 0){\n      $('#ErrBox').removeClass('alert-info');\n      $('#ErrBox').addClass('alert-danger');\n      $('#ErrTitle').text('Erreur');\n      $('#ErrMsg').html(resp.ErrMsg);\n      return false;\n      }\n    $('#ErrBox').removeClass('alert-danger');\n    $('#ErrBox').addClass('alert-info');\n    $('#ErrTitle').text('Information');\n    $('#ErrMsg').html(\"Votre nouveau mot de passe a été envoyé dans votre boîte aux lettres.\");\n  });\n}\n\n/**\n * ChangePass\n * \n * Appelée pour un changement de mot de passe\n */\nfunction changePass() {\n  if( document.getElementById('chg-pwd').style.display == \"none\"){\n    $('#btn-logout').hide();\n    $('#btn-change').text(\"Changer le mot de passe\");\n    $(\"#chg-pwd\").fadeIn();\n    return false;\n  }\n  var Msg = \"<p>Votre mot de passe est incorrect.</p>\";\n  Msg += \"<p>Il doit : \";\n  Msg += \"<ul><li>contenir au moins une minuscule</li>\";\n  Msg += \"<li>contenir au moins une majuscule</li>\";\n  Msg += \"<li>contenir au moins un chiffre</li>\";\n  Msg += \"<li>contenir éventuellement un caractère spécial !@#$%^&*()_+-=[]{};:\\\\|,.<>\\/?</li>\";\n  Msg += \"<li>avoir une taille minimale de 8 caractères</li></ul>\";\n  Msg += \"</p><p>Les deux mots de passe doivent coincider</p>\";\n  Msg += \"<p>Ex: <b>Pa$$w0Ord</b> - est un mot de passe compatible, mais, ne l'utilisez pas, il est mondialement connu !</p>\";\n  if( $('#pass1').val() != $('#pass2').val() ){\n    Msg = \"<p>Vos mots de passe sont différents !</p>\"+Msg;\n    modal.alertBox('danger', Msg, 'ERREUR', 20000);\n    return false;\n  }\n  var passwd = $('#pass1').val();\n  var score = scorePassword(passwd);\n  console.log(\"Votre score \"+score);\n  if (score > 80) {\n    Msg=\"<p>Mot de passe fort</p>\";\n    modal.alertBox('info', Msg, 'Information', 2000);\n  }\n  if (score < 30){\n    Msg = \"<p>Votre mot de passe n'est pas suffisement complexe</p>\"+Msg;\n    modal.alertBox('danger', Msg, 'ERREUR', 20000);\n    return false;\n  }\n\n  data = {\n    Action:   'User',\n    Want:     'changePass',\n    Vars:      passwd\n  }\n  $.post(\"/ajax/index.php\", data, function (resp) {\n    if (resp.Errno != 0) {\n      modal.alertBox('danger', resp.ErrMsg, 'ERREUR');\n    } else {\n      modal.alertBox('success', resp.ErrMsg, 'INFO');\n    }\n  });\n}\n\n/**\n * donne un valeur en fonction de la robustesse du mot de passe\n * @param {string} pass \n */\nfunction scorePassword(pass) \n{\n  var score = 0;\n  if (!pass)\n      return score;\n\n  // award every unique letter until 5 repetitions\n  var letters = new Object();\n  for (var i=0; i<pass.length; i++) {\n      letters[pass[i]] = (letters[pass[i]] || 0) + 1;\n      score += 5.0 / letters[pass[i]];\n  }\n\n  // bonus points for mixing it up\n  var variations = {\n      digits: /\\d/.test(pass),\n      lower: /[a-z]/.test(pass),\n      upper: /[A-Z]/.test(pass),\n      nonWords: /\\W/.test(pass),\n  }\n\n  var variationCount = 0;\n  for (var check in variations) {\n      variationCount += (variations[check] == true) ? 1 : 0;\n  }\n  score += (variationCount - 1) * 10;\n\n  return parseInt(score);\n}\n\n\n","import * as modal from './modal.js';\n\nexport function switcher(action, params)\n{\n  switch(action)\n  {\n    case 'backupAll':\n      Backup();\n      break;\n\n    case 'restore':\n      Restore();\n      break;\n\n    case 'restoreNow':\n      restoreNow();\n      break;\n\n    default:\n      alert(action+\" pas implémenté dans backup.js\");\n  }\n}\n\n/*==========================================================================================\n =                               Sauvegarde / Restauration                                 =\n ===========================================================================================*/\n// TODO Mettre un progress\nfunction Backup() {\n  $(\"#backup-buttons\").fadeOut('slow');\n  data = {\n    Action: 'doBackup',\n    Want: 'makeIt',\n    Type: '',\n    id: ''\n  }\n  modal.alertBox('info', \"Sauvegarde en cours\", \"INFO\", 50000);\n\n  $.post(\"/ajax/index.php\", data, function (data) {\n    modal.alertBox('success', \"Sauvegarde terminée\", \"SUCCESS\", 50000);\n    $(\"#sub-msg-2\").html(\"Fichier de sauvegarde : <a href='\" + data.File + \"'>\" + data.File + \"</a>\");\n  });\n}\n\n/**\n * Restore\n * \n * Affiche les options de restauration\n * \n * @param   void\n * @return  void\n */\nfunction Restore() {\n  loadBackupList();\n  $(\"#backup-buttons\").fadeOut('slow');\n  $(\"#restore-options\").fadeIn();\n  $('#loadBackup').change(function () {\n    var file_data = $('#loadBackup').prop('files')[0];\n    var form_data = new FormData();\n    if (file_data.type != \"application/zip\") {\n      alert(\"Ce n'est pas un fichier.zip\");\n      return false;\n    }\n    form_data.append('file', file_data);\n    form_data.append('Action', 'loadFile');\n    form_data.append('Where', '/_Backup/');\n    $.ajax({\n      url: \"/ajax/index.php\",\n      data: form_data,\n      cache: false,\n      contentType: false,\n      processData: false,\n      type: 'post',\n      success: function () {\n        loadBackupList();\n      }\n    });\n  });\n\n}\n\n/**\n * loadBackupList\n * \n * Charge la liste selectBackup avec la liste des fichiers de sauvegarde\n * présents dans ./_Backup \n * @param   void\n * @return  void\n */\nfunction loadBackupList() {\n  data = {\n    Action: 'doBackup',\n    Want: 'loadBackupList',\n    Type: '',\n    id: 0\n  };\n  $.post('/ajax/index.php', data, function (data) {\n    var listitems;\n    data.forEach((item) => {\n      listitems += '<option value=' + item.id + '>' + item.label + '</option>';\n    });\n    $(\"#selectBackup\").append(listitems);\n\n  });\n}\n\n/**\n * restoreNow\n * \n * Lance la restauration du fichier choisi\n */\nfunction restoreNow() {\n  if ($('#selectType').val() == 0) {\n    alert(\"Veuillez choisir un type de restauration !\");\n    return false;\n  }\n  if ($('#selectBackup option:selected').val() == undefined) {\n    alert('Choisissez une sauvegarde à restaurer');\n    return false;\n  }\n  $(\"#sub-msg-1\").text(\"Restauration en cours ...\");\n  data = {\n    Action: \"doBackup\",\n    Want: \"doRestore\",\n    Type: $('#selectType').val(),\n    id: $('#selectBackup option:selected').val()\n  }\n  $.post('/ajax/index.php', data, function (data) {\n    $(\"#sub-msg-1\").text(\"Restauration terminée\");\n    $(\"#sub-msg-2\").html(\"Statut: \" + data.ErrMsg);\n  });\n}\n\n","import * as mContrat from './modules/contrat.js';\nimport * as helpers from  './modules/helper.js';\nimport * as user from     './modules/user.js';\nimport * as backup from   './modules/backup.js';\n\nwindow.contrat = function(action, params){\n   mContrat.doAction(action, params);\n}\n\nwindow.formatNumber = function(){\n  helpers.formatNumber();\n}\n\nwindow.user = function(action, params){\n  user.user(action, params);\n}\n\nwindow.getLink= function()\n{\n  return prompt(\"Le lien\");\n}\n\n// window.alertBox = function()\n// {\n//   user.alertBox();\n// }\n\nwindow.backup = function(action, params)\n{\n  backup.switcher(action, params);\n}","export function formatNumber()\n{\n  var sPrix = $('#amount').val();\n\n  if( sPrix.indexOf(',') > 0){\n    sPrix = sPrix.replace(',','.');\n  }\n  var dPrix = parseFloat(sPrix).toFixed(2);\n  sPrix = $('#amount').val(dPrix);\n}\n"],"sourceRoot":""}